webpackJsonp([16],{1135:function(t,e,n){n(966);var a=n(0)(n(836),n(1193),null,null);t.exports=a.exports},1137:function(t,e,n){n(964);var a=n(0)(n(838),n(1190),"data-v-49868dc9",null);t.exports=a.exports},1163:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container-window",{attrs:{title:"Student Attendance",subtitle:"Attendance",back:""},on:{back:function(e){t.$router.go(-1)}}},[n("div",{staticClass:"row py-4"},[n("div",{staticClass:"col-12 col-lg-8 offset-lg-2"},[n("date-selector",{staticClass:"col-12 col-lg-8 mx-auto",attrs:{min:t.startDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),n("div",{staticClass:"mb-3 text-center py-2"},[t.enabled?n("div",[n("input-button",{attrs:{value:"Cancel"},nativeOn:{click:function(e){t.cancel(e)}}}),t._v(" "),n("input-button",{attrs:{type:"submit",value:"Save Attendance"},nativeOn:{click:function(e){t.saveAttendance(e)}}})],1):n("div",[n("input-button",{attrs:{value:"Take Attendance"},nativeOn:{click:function(e){t.takeAttendance(e)}}})],1)])],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-lg-8 offset-lg-2",class:{disabled:!t.enabled}},[n("div",{staticClass:"text-center"},[t._v("\n                Attendance: "+t._s(t.aggregate.percent)+"% | "+t._s(t.aggregate.total)+" Students - "+t._s(t.aggregate.absent)+" Absent\n            ")]),t._v(" "),n("div",{staticClass:"py-4"},t._l(t.students,function(e){return n("attendance-card",{attrs:{student:e,disabled:!t.enabled},on:{toggle:t.toggleAttendance}})}))])])])},staticRenderFns:[]}},1190:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-row align-items-center text-center"},[n("a",{attrs:{role:"button"},on:{click:function(e){e.preventDefault(),t.prev(e)}}},[n("icon",{staticClass:"icon",attrs:{type:"chevron-left"}})],1),t._v(" "),n("div",{staticClass:"date-selector-datebox text-center"},[n("h3",[t._v(" "+t._s(t._f("dateForHumans")(t.currentDate))+" ")]),t._v(" "),n("h4",{staticClass:"text-uppercase text-muted"},[t._v(" "+t._s(t.dayOfWeek)+" ")])]),t._v(" "),n("a",{attrs:{role:"button"},on:{click:function(e){e.preventDefault(),t.next(e)}}},[n("icon",{staticClass:"icon",attrs:{type:"chevron-right"}})],1)])},staticRenderFns:[]}},1193:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("abstract-card",t._b({staticClass:"c-attendance-card",on:{remove:function(e){t.$emit("remove",t.student)}}},"abstract-card",{remove:t.remove}),[n("div",{staticClass:"d-flex flex-row align-items-center"},[n("img",{staticClass:"rounded-circle c-attendance-card-photo fit-cover",attrs:{src:t.student.photo}}),t._v(" "),n("div",{staticClass:"mr-auto"},[n("div",{staticClass:"c-attendance-card-title",class:{"text-muted":!t.student.name.trim()}},[t._v("\n                "+t._s(t.student.name.trim()||"Name not set")+"\n            ")]),t._v(" "),n("div",{staticClass:"c-attendance-card-subtitle flex-auto"},[n("span",{staticClass:"text-muted",class:{"text-danger":!t.attendance}},[t._v("\n                    Roll Number: "+t._s(t.student.uid)+" "+t._s(t.attendanceStatus)+"\n                ")])])]),t._v(" "),n("div",{staticClass:"flex ml-auto"},[n("input-switch",{attrs:{value:t.attendance},on:{input:t.toggle}})],1)]),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},541:function(t,e,n){n(946);var a=n(0)(n(865),n(1163),"data-v-1100b3f8",null);t.exports=a.exports},836:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),s=function(t){return t&&t.__esModule?t:{default:t}}(a),r=n(4);e.default={name:"AttendanceCard",data:function(){return{attendance:!0}},props:{student:{type:Object,required:!0},remove:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:(0,s.default)({attendanceStatus:function(){return this.attendance?"Present":"Absent"},department:function(){var t=this.student;return this.departmentById(t.department_id)||{}}},(0,r.mapGetters)("departments",["departmentById"])),methods:{toggle:function(t){if(!this.disabled)return this.attendance=t,this.$emit("toggle",t,this.student.id)}}}},838:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),s=function(t){return t&&t.__esModule?t:{default:t}}(a),r=n(530);e.default={name:"DateSelector",data:function(){return{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},props:{min:{type:String,required:!0},max:{type:String,default:function(){return(new Date).toDateString()}},value:{default:function(){return(new Date).toDateString()}},format:{type:String,default:"DD-MM-YYYY"}},computed:{dayOfWeek:function(){return this.isToday()?"today":(0,s.default)(this.value).format("dddd")},currentDate:{get:function(){return(0,s.default)(this.value).utc()},set:function(t){this.$emit("input",t)}}},methods:{prev:function(){var t=this.currentDate;this.min&&!t.isAfter(this.min,"date")||(this.currentDate=t.subtract(1,"days"))},next:function(){var t=this.currentDate;t.isBefore(this.max,"date")&&(this.currentDate=t.add(1,"days"))},isToday:function(){return!this.currentDate.diff((0,s.default)(),"days")}},filters:{dateForHumans:r.dateForHumans}}},865:function(t,e,n){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=_interopRequireDefault(a),r=n(2),i=_interopRequireDefault(r),c=n(5),d=_interopRequireDefault(c),o=n(1137),u=_interopRequireDefault(o),l=n(1135),f=_interopRequireDefault(l),p=n(4);e.default={name:"CreateAttendance",components:{DateSelector:u.default,AttendanceCard:f.default},data:function(){return{students:[],attendance:[],startedOn:"",enabled:!1,date:(new Date).toDateString()}},props:{id:{type:Number,required:!0}},computed:(0,d.default)({session:function session(){var session=this.sessionById(this.id);return this.startDate=session.started_on,session},startDate:function(){return this.startedOn},aggregate:function(){var t=this.students.length,e=this.attendance.length;return{total:t,absent:e,percent:100*(1-e/t)}}},(0,p.mapGetters)("courses",["sessionById"])),methods:(0,d.default)({init:function(){var t=this;return(0,i.default)(s.default.mark(function _callee(){var e,n;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.enrollments(t.id);case 2:e=a.sent,n=e.students,t.students=n;case 5:case"end":return a.stop()}},_callee,t)}))()},takeAttendance:function(){this.enabled=!0},cancel:function(){this.enabled=!1,this.attendance=[]},toggleAttendance:function(t,e){if(t){var n=this.attendance.indexOf(e);n>=0&&this.attendance.splice(n,1)}else this.attendance.push(e)},saveAttendance:function(){var t=this;return(0,i.default)(s.default.mark(function _callee2(){var e;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e={date:t.date,attendance:t.attendance},n.next=3,t.store({session:t.session,attendance:e});case 3:t.enabled=!1;case 4:case"end":return n.stop()}},_callee2,t)}))()}},(0,p.mapActions)("courses",["enrollments"]),(0,p.mapActions)("attendance",["store"])),created:function(){this.init()}}},903:function(t,e,n){e=t.exports=n(528)(void 0),e.push([t.i,".disabled[data-v-1100b3f8]{opacity:.6}",""])},921:function(t,e,n){e=t.exports=n(528)(void 0),e.push([t.i,".icon[data-v-49868dc9]{display:inline}.date-selector-datebox[data-v-49868dc9]{display:inline;width:400px}",""])},923:function(t,e,n){e=t.exports=n(528)(void 0),e.push([t.i,".c-attendance-card-photo{width:3.42857rem;height:3.42857rem;margin-right:.71429rem}.c-attendance-card-title{font-size:1.14285rem}.c-attendance-card-subtitle{font-size:.75rem}.c-attendance-card-block{padding:.64286rem .71429rem}",""])},946:function(t,e,n){var a=n(903);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(529)("06ee690a",a,!0)},964:function(t,e,n){var a=n(921);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(529)("47706548",a,!0)},966:function(t,e,n){var a=n(923);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(529)("d182a540",a,!0)}});
//# sourceMappingURL=16.95637ab44c45285000ec.js.map