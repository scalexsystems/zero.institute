webpackJsonp([24,34],{1115:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("container-window",{attrs:{title:"Edit Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(e){t.$router.go(-1)}}},[s("template",{slot:"buttons"},[s("input-button",{ref:"submit",attrs:{value:"Save"},nativeOn:{click:function(e){t.save(e)}}})],1),t._v(" "),s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-lg-8 offset-lg-2 my-2"},[t.formStatus?s("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e(),t._v(" "),s("form",{staticClass:"row"},[s("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},model:{value:t.attributes.name,callback:function(e){t.attributes.name=e},expression:"attributes.name"}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},model:{value:t.attributes.code,callback:function(e){t.attributes.code=e},expression:"attributes.code"}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},model:{value:t.attributes.department_id,callback:function(e){t.attributes.department_id=e},expression:"attributes.department_id"}},"input-typeahead",{errors:t.errors,suggestions:t.departments}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({attrs:{title:"Instructor",component:"SelectOptionUser"},on:{select:t.onInstructorSelect,search:t.onInstructorSearch},model:{value:t.attributes.instructor,callback:function(e){t.attributes.instructor=e},expression:"attributes.instructor"}},"input-typeahead",{suggestions:t.instructors}))],1),t._v(" "),s("div",{staticClass:"col-12"},[s("input-textarea",t._b({attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},model:{value:t.attributes.description,callback:function(e){t.attributes.description=e},expression:"attributes.description"}},"input-textarea",{errors:t.errors}))],1),t._v(" "),s("h6",{staticClass:"col-12 my-3 text-center text-uppercase text-muted"},[t._v("Constraints & Requisites")]),t._v(" "),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Prerequisite courses")]),t._v(" "),s("typeahead",t._b({on:{select:t.onCourseSelect}},"typeahead",{suggestions:t.courses,value:[]}))],1)]),t._v(" "),t._l(t.prerequisites,function(e){return s("div",{key:e,staticClass:"col-12 col-lg-6 mb-3"},[s("course-card",t._b({attrs:{remove:""},on:{remove:t.onCourseRemove}},"course-card",{course:e}))],1)}),t._v(" "),0===t.prerequisites.length?s("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"64px 0"}},[t._v("\n            No prerequisite courses.\n          ")]):t._e()],2)],1)])])],2)},staticRenderFns:[]}},454:function(t,e,s){var r=s(0)(s(651),s(685),null,null);t.exports=r.exports},458:function(t,e,s){s(889);var r=s(0)(s(782),s(1115),null,null);t.exports=r.exports},651:function(t,e,s){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),i=_interopRequireDefault(r),a=s(2),o=_interopRequireDefault(a),u=s(5),n=_interopRequireDefault(u),c=s(50),l=_interopRequireDefault(c),d=s(39),p=s(4),f=s(449),m=_interopRequireDefault(f),b=s(446),v=_interopRequireDefault(b);e.default={name:"CourseCreate",data:function(){return{attributes:{name:"",code:"",department_id:"",instructor:0,courses:[]},instructor:null,teachers:[]}},computed:(0,n.default)({prerequisites:function(){var t=this;return this.attributes.courses.map(function(e){return t.courseById(e)})},years:function(){return[{id:1,name:"First Year"},{id:2,name:"Second Year"},{id:3,name:"Third Year"},{id:4,name:"Fourth Year"}]},instructors:function(){var t=this.instructor,e=this.teachers;return t?e.findIndex(function(e){return e.id===t.id})>-1?e:[t].concat(e):e}},(0,p.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines",courses:"courses/courses",semesters:"semesters/semesters",courseById:"courses/courseById"})),methods:(0,n.default)({processResponse:function(t,e,s){t?(this.attributes=this.$options.data().attributes,this.$router.replace({name:"course.show",params:{id:t.id}})):e?(this.setErrors(e),this.formStatus=e.$message):s&&(this.formStatus="Ah! Oh! This is unexpected. Call support now!")},create:function(){var t=this;return(0,o.default)(i.default.mark(function _callee(){var e,s,r,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.clearErrors(),t.$refs.submit.$el.classList.add("disabled"),i.next=4,t.store(t.attributes);case 4:e=i.sent,s=e.course,r=e.errors,a=e.response,t.$refs.submit.$el.classList.remove("disabled"),t.processResponse(s,r,a);case 10:case"end":return i.stop()}},_callee,t)}))()},onCourseSelect:function(t){this.attributes.courses.indexOf(t.id)<0&&this.attributes.courses.push(t.id)},onCourseRemove:function(t){var e=this.attributes.courses.indexOf(t.id);e>-1&&this.attributes.courses.splice(e,1)},onInstructorSearch:(0,l.default)(function(){var t=(0,o.default)(i.default.mark(function _callee2(t){var e,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.search({q:t});case 2:e=r.sent,s=e.teachers,this.teachers=s||[];case 5:case"end":return r.stop()}},_callee2,this)}));return function(e){return t.apply(this,arguments)}}()),onInstructorSelect:function(t){this.instructor=t}},(0,p.mapActions)("courses",["index","store"]),(0,p.mapActions)("teachers",{search:"index"})),created:function(){this.courses.length||this.index(),this.onInstructorSearch()},components:{CourseCard:m.default,TeacherCard:v.default},mixins:[d.formHelper]}},685:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("container-window",{attrs:{title:"Create Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(e){t.$router.go(-1)}}},[s("template",{slot:"buttons"},[s("input-button",{ref:"submit",attrs:{value:"Create"},nativeOn:{click:function(e){t.create(e)}}})],1),t._v(" "),s("div",{staticClass:"container-zero mt-3"},[t.formStatus?s("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e()],1),t._v(" "),s("div",{staticClass:"container-zero"},[s("form",{staticClass:"row",on:{submit:function(e){e.preventDefault(),t.create(e)}}},[s("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},model:{value:t.attributes.name,callback:function(e){t.attributes.name=e},expression:"attributes.name"}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},model:{value:t.attributes.code,callback:function(e){t.attributes.code=e},expression:"attributes.code"}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},model:{value:t.attributes.department_id,callback:function(e){t.attributes.department_id=e},expression:"attributes.department_id"}},"input-typeahead",{errors:t.errors,suggestions:t.departments}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({attrs:{title:"Instructor",component:"SelectOptionUser"},on:{select:t.onInstructorSelect,search:t.onInstructorSearch},model:{value:t.attributes.instructor,callback:function(e){t.attributes.instructor=e},expression:"attributes.instructor"}},"input-typeahead",{suggestions:t.instructors}))],1),t._v(" "),s("div",{staticClass:"col-12"},[s("input-textarea",t._b({attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},model:{value:t.attributes.description,callback:function(e){t.attributes.description=e},expression:"attributes.description"}},"input-textarea",{errors:t.errors}))],1)])]),t._v(" "),s("h6",{staticClass:"split-header mt-3 py-3 text-muted text-uppercase"},[t._v("Prerequisite Courses")]),t._v(" "),s("div",{staticClass:"container-zero"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Prerequisite courses")]),t._v(" "),s("typeahead",t._b({on:{select:t.onCourseSelect}},"typeahead",{suggestions:t.courses,value:[]}))],1)]),t._v(" "),t._l(t.prerequisites,function(e){return s("div",{key:e,staticClass:"col-12 col-lg-6 mb-3"},[s("course-card",t._b({attrs:{remove:""},on:{remove:t.onCourseRemove}},"course-card",{course:e}))],1)}),t._v(" "),0===t.prerequisites.length?s("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"27px 0"}},[t._v("\n        No prerequisite courses.\n      ")]):t._e()],2)])],2)},staticRenderFns:[]}},782:function(t,e,s){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),i=_interopRequireDefault(r),a=s(2),o=_interopRequireDefault(a),u=s(24),n=_interopRequireDefault(u),c=s(5),l=_interopRequireDefault(c),d=s(4),p=s(454),f=_interopRequireDefault(p),m=s(7),b=s(451),v=_interopRequireDefault(b);e.default={name:"CourseEdit",extends:f.default,computed:(0,d.mapGetters)(["school"]),methods:(0,l.default)({setAttributes:function(){var t=this,e=this.course;if(e){var s=(e.sessions||[]).find(function(e){return e.session_id===t.school.session_id});this.attributes=(0,m.only)(e,(0,n.default)(this.attributes)),this.attributes.courses=(e.prerequisites||[]).map(function(t){return t.id}),this.attributes.instructor=s?s.instructor_id:0,this.instructor=s?s.instructor:null}},save:function(){var t=this;return(0,o.default)(i.default.mark(function _callee(){var e,s,r,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.clearErrors(),t.$refs.submit.$el.classList.add("disabled"),i.next=4,t.update({id:t.id,payload:t.attributes});case 4:e=i.sent,s=e.course,r=e.errors,a=e.response,t.$refs.submit.$el.classList.remove("disabled"),t.processResponse(s,r,a);case 10:case"end":return i.stop()}},_callee,t)}))()}},(0,d.mapActions)("courses",["update"])),created:function(){this.course&&this.setAttributes()},mixins:[v.default],watch:{course:"setAttributes"}}},846:function(t,e,s){e=t.exports=s(443)(void 0),e.push([t.i,"",""])},889:function(t,e,s){var r=s(846);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s(444)("32f54756",r,!0)}});
//# sourceMappingURL=24.0891697075d719474e22.js.map