webpackJsonp([31,39],{409:function(e,t,r){var s=r(0)(r(570),r(577),null,null);e.exports=s.exports},570:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),i=_interopRequireDefault(s),a=r(2),n=_interopRequireDefault(a),o=r(5),u=_interopRequireDefault(o),c=r(115),d=_interopRequireDefault(c),l=r(39),p=r(4),m=r(404),f=_interopRequireDefault(m),v=r(400),h=_interopRequireDefault(v);t.default={name:"CourseCreate",data:function(){return{attributes:{name:"",code:"",department_id:"",instructor:0,courses:[]},instructor:null,teachers:[]}},computed:(0,u.default)({prerequisites:function(){var e=this;return this.attributes.courses.map(function(t){return e.courseById(t)})},years:function(){return[{id:1,name:"First Year"},{id:2,name:"Second Year"},{id:3,name:"Third Year"},{id:4,name:"Fourth Year"}]},instructors:function(){var e=this.instructor,t=this.teachers;if(!e)return t;var r=t.findIndex(function(t){return t.id===e.id});return r>-1?t:[e].concat(t)}},(0,p.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines",courses:"courses/courses",semesters:"semesters/semesters",courseById:"courses/courseById"})),methods:(0,u.default)({processResponse:function(e,t,r){e?(this.attributes=this.$options.data().attributes,this.$router.replace({name:"course.show",params:{id:e.id}})):t?(this.setErrors(t),this.formStatus=t.$message):r&&(this.formStatus="Ah! Oh! This is unexpected. Call support now!")},create:function(){var e=this;return(0,n.default)(i.default.mark(function _callee(){var t,r,s,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.clearErrors(),e.$refs.submit.$el.classList.add("disabled"),i.next=4,e.store(e.attributes);case 4:t=i.sent,r=t.course,s=t.errors,a=t.response,e.$refs.submit.$el.classList.remove("disabled"),e.processResponse(r,s,a);case 10:case"end":return i.stop()}},_callee,e)}))()},onCourseSelect:function(e){this.attributes.courses.indexOf(e.id)<0&&this.attributes.courses.push(e.id)},onCourseRemove:function(e){var t=this.attributes.courses.indexOf(e.id);t>-1&&this.attributes.courses.splice(t,1)},onInstructorSearch:(0,d.default)(function(){var e=(0,n.default)(i.default.mark(function _callee2(e){var t,r;return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.search({q:e});case 2:t=s.sent,r=t.teachers,this.teachers=r||[];case 5:case"end":return s.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()),onInstructorSelect:function(e){this.instructor=e}},(0,p.mapActions)("courses",["index","store"]),(0,p.mapActions)("teachers",{search:"index"})),created:function(){this.courses.length||this.index(),this.onInstructorSearch()},components:{CourseCard:f.default,TeacherCard:h.default},mixins:[l.formHelper]}},577:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("container-window",{attrs:{title:"Create Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(t){e.$router.go(-1)}}},[r("template",{slot:"buttons"},[r("input-button",{ref:"submit",attrs:{value:"Create"},nativeOn:{click:function(t){e.create(t)}}})],1),e._v(" "),r("div",{staticClass:"container-zero mt-3"},[e.formStatus?r("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:e._s(e.formStatus)}}):e._e()],1),e._v(" "),r("div",{staticClass:"container-zero"},[r("form",{staticClass:"row",on:{submit:function(t){t.preventDefault(),e.create(t)}}},[r("input",{attrs:{type:"submit",hidden:""}}),e._v(" "),r("div",{staticClass:"col-12 col-lg-6"},[r("input-text",e._b({directives:[{name:"model",rawName:"v-model",value:e.attributes.name,expression:"attributes.name"}],attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},domProps:{value:e.attributes.name},on:{input:function(t){e.attributes.name=t}}},"input-text",{errors:e.errors}))],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6"},[r("input-text",e._b({directives:[{name:"model",rawName:"v-model",value:e.attributes.code,expression:"attributes.code"}],attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},domProps:{value:e.attributes.code},on:{input:function(t){e.attributes.code=t}}},"input-text",{errors:e.errors}))],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6"},[r("input-typeahead",e._b({directives:[{name:"model",rawName:"v-model",value:e.attributes.department_id,expression:"attributes.department_id"}],attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},domProps:{value:e.attributes.department_id},on:{input:function(t){e.attributes.department_id=t}}},"input-typeahead",{errors:e.errors,suggestions:e.departments}))],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-6"},[r("input-typeahead",e._b({directives:[{name:"model",rawName:"v-model",value:e.attributes.instructor,expression:"attributes.instructor"}],attrs:{title:"Instructor",component:"SelectOptionUser"},domProps:{value:e.attributes.instructor},on:{select:e.onInstructorSelect,search:e.onInstructorSearch,input:function(t){e.attributes.instructor=t}}},"input-typeahead",{suggestions:e.instructors}))],1),e._v(" "),r("div",{staticClass:"col-12"},[r("input-textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.attributes.description,expression:"attributes.description"}],attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},domProps:{value:e.attributes.description},on:{input:function(t){e.attributes.description=t}}},"input-textarea",{errors:e.errors}))],1)])]),e._v(" "),r("h6",{staticClass:"split-header mt-3 py-3 text-muted text-uppercase"},[e._v("Prerequisite Courses")]),e._v(" "),r("div",{staticClass:"container-zero"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"form-group"},[r("label",[e._v("Prerequisite courses")]),e._v(" "),r("typeahead",e._b({on:{select:e.onCourseSelect}},"typeahead",{suggestions:e.courses,value:[]}))],1)]),e._v(" "),e._l(e.prerequisites,function(t){return r("div",{staticClass:"col-12 col-lg-6 mb-3"},[r("course-card",e._b({attrs:{remove:""},on:{remove:e.onCourseRemove}},"course-card",{course:t}))],1)}),e._v(" "),0===e.prerequisites.length?r("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"27px 0"}},[e._v("\n        No prerequisite courses.\n      ")]):e._e()],2)])],2)},staticRenderFns:[]}}});
//# sourceMappingURL=31.59ed63dfb3d28b107a5e.js.map