webpackJsonp([7,39],{433:function(t,e,a){a(671);var r=a(0)(a(632),a(726),null,null);t.exports=r.exports},587:function(t,e,a){a(689);var r=a(0)(a(594),a(756),null,null);t.exports=r.exports},593:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{department:{type:Object,required:!0},remove:{type:Boolean,default:!1},footer:{type:Boolean,default:!1}}}},594:function(t,e,a){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(3),s=_interopRequireDefault(r),i=a(2),n=_interopRequireDefault(i),o=a(5),u=_interopRequireDefault(o),c=a(4),d=a(39),l=a(115),m=_interopRequireDefault(l);e.default={name:"EditDepartment",data:function(){return{attributes:{name:"",short_name:"",academic:!0,head_id:0},teachers:[],disabled:!1}},methods:(0,u.default)({save:function(){var t=this;return(0,n.default)(s.default.mark(function _callee(){var e,a,r;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.clearErrors(),t.disabled=!0,s.next=4,t.store(t.attributes);case 4:e=s.sent,a=e.errors,r=e.department,t.disabled=!1,r?t.$emit("done"):a?(t.setErrors(a),t.formStatus=a.$message):t.formStatus="Ah! Oh! This is not expected. Contact support.";case 9:case"end":return s.stop()}},_callee,t)}))()},onSearch:(0,m.default)(function(t){this.fetch(t)},400),fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.default)(s.default.mark(function _callee2(){var a,r;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.index({q:e});case 2:a=s.sent,r=a.teachers,t.teachers=r||[];case 5:case"end":return s.stop()}},_callee2,t)}))()}},(0,c.mapActions)("departments",["store"]),(0,c.mapActions)("teachers",["index"])),created:function(){this.fetch()},mixins:[d.formHelper]}},595:function(t,e,a){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(29),s=_interopRequireDefault(r),i=a(3),n=_interopRequireDefault(i),o=a(2),u=_interopRequireDefault(o),c=a(5),d=_interopRequireDefault(c),l=a(4),m=a(587),p=_interopRequireDefault(m),f=a(8);e.default={name:"EditDepartment",extends:p.default,props:{department:{type:Object,required:!0}},computed:{suggestions:function(){var t=this.department.head_id?[this.department.head]:[],e=this.teachers;return t.concat(e)}},methods:(0,d.default)({edit:function(){var t=this;return(0,u.default)(n.default.mark(function _callee(){var e,a,r;return n.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.clearErrors(),t.disabled=!0,s.next=4,t.update({id:t.department.id,payload:t.attributes});case 4:e=s.sent,a=e.errors,r=e.department,t.disabled=!1,r?t.$emit("done"):a?(t.setErrors(a),t.formStatus=a.$message):t.formStatus="Ah! Oh! This is not expected. Contact support.";case 9:case"end":return s.stop()}},_callee,t)}))()}},(0,l.mapActions)("departments",["update"])),created:function(){this.attributes=(0,f.only)(this.department,(0,s.default)(this.attributes))}}},632:function(t,e,a){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(5),s=_interopRequireDefault(r),i=a(4),n=a(403),o=_interopRequireDefault(n),u=a(704),c=_interopRequireDefault(u),d=a(587),l=_interopRequireDefault(d),m=a(705),p=_interopRequireDefault(m);e.default={name:"InstituteDepartments",data:function(){return{current:null}},computed:(0,s.default)({sidebarId:function(){return"settings.departments"}},(0,i.mapGetters)("departments",["departments"])),methods:{edit:function(t){this.current=t,this.onEdit()},create:function(){this.current=null,this.onEdit()}},components:{CreateDepartment:l.default,DepartmentCard:c.default,EditDepartment:p.default},mixins:[o.default]}},643:function(t,e,a){e=t.exports=a(398)(),e.push([t.i,"",""])},661:function(t,e,a){e=t.exports=a(398)(),e.push([t.i,"",""])},662:function(t,e,a){e=t.exports=a(398)(),e.push([t.i,"",""])},671:function(t,e,a){var r=a(643);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(399)("465257f6",r,!0)},689:function(t,e,a){var r=a(661);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(399)("3fcc069c",r,!0)},690:function(t,e,a){var r=a(662);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(399)("1a932ac3",r,!0)},699:function(t,e){t.exports="/app/images/departments.svg?9f88c691a6976acee6b415b07f4679c0"},704:function(t,e,a){a(690);var r=a(0)(a(593),a(757),null,null);t.exports=r.exports},705:function(t,e,a){var r=a(0)(a(595),a(723),null,null);t.exports=r.exports},723:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-zero c-department-create mx-auto"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex flex-row align-items-center"},[a("h5",{staticClass:"mb-0"},[t._v("Edit Department")]),t._v(" "),a("div",{staticClass:"ml-auto"},[a("input-button",{staticClass:"btn btn-secondary",attrs:{value:"Cancel"},nativeOn:{click:function(e){t.$emit("done")}}}),t._v(" "),a("input-button",{class:{disabled:t.disabled},attrs:{value:"Save"},nativeOn:{click:function(e){t.edit(e)}}})],1)]),t._v(" "),a("div",{staticClass:"card-block flex-auto"},[t.formStatus?a("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e(),t._v(" "),a("form",{staticClass:"row",on:{submit:function(e){e.preventDefault(),t.edit(e)}}},[a("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),a("div",{staticClass:"col-12"},[a("input-text",{directives:[{name:"model",rawName:"v-model",value:t.attributes.name,expression:"attributes.name"}],attrs:{title:"Name",errors:t.errors,required:""},domProps:{value:t.attributes.name},on:{input:function(e){t.attributes.name=e}}})],1),t._v(" "),a("div",{staticClass:"col-12"},[a("checkbox-wrapper",{attrs:{title:"Type",errors:t.errors,required:""}},[a("input-box",{directives:[{name:"model",rawName:"v-model",value:t.attributes.academic,expression:"attributes.academic"}],attrs:{radio:!0,title:"Academic",inline:""},domProps:{value:t.attributes.academic},on:{input:function(e){t.attributes.academic=e}}}),t._v(" "),a("input-box",{directives:[{name:"model",rawName:"v-model",value:t.attributes.academic,expression:"attributes.academic"}],attrs:{radio:!1,title:"Non-academic",inline:""},domProps:{value:t.attributes.academic},on:{input:function(e){t.attributes.academic=e}}})],1)],1),t._v(" "),a("div",{staticClass:"col-12 col-lg-6"},[a("input-text",{directives:[{name:"model",rawName:"v-model",value:t.attributes.short_name,expression:"attributes.short_name"}],attrs:{title:"Short Code",email:t.errors,required:""},domProps:{value:t.attributes.short_name},on:{input:function(e){t.attributes.short_name=e}}})],1),t._v(" "),a("div",{staticClass:"col-12 col-lg-6"},[a("input-typeahead",{directives:[{name:"model",rawName:"v-model",value:t.attributes.head_id,expression:"attributes.head_id"}],attrs:{title:"Head of Department",component:"SelectOptionUser",suggestions:t.teachers,errors:t.errors},domProps:{value:t.attributes.head_id},on:{input:function(e){t.attributes.head_id=e}}})],1)])],1)])])},staticRenderFns:[]}},726:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("container-window",t._b({},"container-window",{title:t.title,subtitle:t.subtitle}),[r("template",{slot:"sidebar"},[r("sidebar")],1),t._v(" "),r("template",{slot:"buttons"},[r("input-button",{attrs:{value:"Add New"},nativeOn:{click:function(e){t.create(e)}}})],1),t._v(" "),r("modal",{attrs:{open:t.editing,dismissable:!1},on:{close:function(e){t.editing=!1}}},[null===t.current?r("create-department",{on:{done:function(e){t.editing=!1}}}):r("edit-department",t._b({on:{done:function(e){t.editing=!1}}},"edit-department",{department:t.current}))],1),t._v(" "),r("div",{staticClass:"container-zero my-3 py-3 text-center"},[r("img",{attrs:{src:a(699)}})]),t._v(" "),r("div",{staticClass:"container-zero py-3"},[r("div",{staticClass:"row"},[r("h2",{staticClass:"col-12 text-center"},[t._v(t._s(t.title))]),t._v(" "),t._l(t.departments,function(e){return r("div",{staticClass:"col-12 col-lg-6 mt-3"},[r("department-card",t._b({attrs:{role:"button"},nativeOn:{click:function(a){t.edit(e)}}},"department-card",{department:e,footer:!0}))],1)})],2)])],2)},staticRenderFns:[]}},756:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-zero c-department-create mx-auto"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header d-flex flex-row align-items-center"},[a("h5",{staticClass:"mb-0"},[t._v("Create Department")]),t._v(" "),a("div",{staticClass:"ml-auto"},[a("input-button",{staticClass:"btn btn-secondary",attrs:{value:"Cancel"},nativeOn:{click:function(e){t.$emit("done")}}}),t._v(" "),a("input-button",{class:{disabled:t.disabled},attrs:{value:"Create"},nativeOn:{click:function(e){t.save(e)}}})],1)]),t._v(" "),a("div",{staticClass:"card-block flex-auto"},[t.formStatus?a("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e(),t._v(" "),a("form",{staticClass:"row",on:{submit:function(e){e.preventDefault(),t.save(e)}}},[a("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),a("div",{staticClass:"col-12"},[a("input-text",{directives:[{name:"model",rawName:"v-model",value:t.attributes.name,expression:"attributes.name"}],attrs:{title:"Name",errors:t.errors,required:""},domProps:{value:t.attributes.name},on:{input:function(e){t.attributes.name=e}}})],1),t._v(" "),a("div",{staticClass:"col-12"},[a("checkbox-wrapper",{attrs:{title:"Type",errors:t.errors,required:""}},[a("input-box",{directives:[{name:"model",rawName:"v-model",value:t.attributes.academic,expression:"attributes.academic"}],attrs:{radio:!0,title:"Academic",inline:""},domProps:{value:t.attributes.academic},on:{input:function(e){t.attributes.academic=e}}}),t._v(" "),a("input-box",{directives:[{name:"model",rawName:"v-model",value:t.attributes.academic,expression:"attributes.academic"}],attrs:{radio:!1,title:"Non-academic",inline:""},domProps:{value:t.attributes.academic},on:{input:function(e){t.attributes.academic=e}}})],1)],1),t._v(" "),a("div",{staticClass:"col-12 col-lg-6"},[a("input-text",{directives:[{name:"model",rawName:"v-model",value:t.attributes.short_name,expression:"attributes.short_name"}],attrs:{title:"Short Code",errors:t.errors,required:""},domProps:{value:t.attributes.short_name},on:{input:function(e){t.attributes.short_name=e}}})],1),t._v(" "),a("div",{staticClass:"col-12 col-lg-6"},[a("input-typeahead",{directives:[{name:"model",rawName:"v-model",value:t.attributes.head_id,expression:"attributes.head_id"}],attrs:{title:"Head of Department",component:"SelectOptionUser",suggestions:t.teachers,errors:t.errors},domProps:{value:t.attributes.head_id},on:{input:function(e){t.attributes.head_id=e}}})],1)])],1)])])},staticRenderFns:[]}},757:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("abstract-card",t._b({},"abstract-card",{remove:t.remove,footer:t.footer}),[a("h6",{staticClass:"card-title"},[t._v(t._s(t.department.name)+" - "+t._s(t.department.short_name))]),t._v(" "),a("small",{staticClass:"text-muted d-block"},[t._v("\n    Head of Department: "+t._s(t.department.head.name||"...")+"\n  ")]),t._v(" "),a("template",{slot:"footer"},[a("div",{staticClass:"d-flex flex-row align-items-center text-center"},[a("div",{staticClass:"profile-field flex-auto mb-0"},[a("div",{staticClass:"label"},[t._v("Students")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.department.stats.student))])]),t._v(" "),a("div",{staticClass:"profile-field flex-auto mb-0"},[a("div",{staticClass:"label"},[t._v("Teachers")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.department.stats.teacher))])]),t._v(" "),a("div",{staticClass:"profile-field flex-auto mb-0"},[a("div",{staticClass:"label"},[t._v("Employees")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.department.stats.employee))])])])])],2)},staticRenderFns:[]}}});
//# sourceMappingURL=7.d92a115e3cec907cd8ae.js.map