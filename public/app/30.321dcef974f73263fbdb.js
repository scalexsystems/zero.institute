webpackJsonp([30],{1201:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("container",{attrs:{title:"Students Directory",subtitle:"Explore students' information",back:""},on:{back:function(e){t.$router.go(-1)}}},[n("div",{staticClass:"container py-3 student-list"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-lg-3"},[n("div",{staticClass:"card card-block"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 col-md-12 mb-1"},[n("checkbox-wrapper",{attrs:{title:"Dicipline"}},t._l(t.disciplines,function(e){return n("input-box",{key:e,attrs:{checkbox:e.id,title:e.name,custom:!1},model:{value:t.discipline,callback:function(e){t.discipline=e},expression:"discipline"}})}))],1),t._v(" "),n("div",{staticClass:"col-6 col-md-12"},[n("checkbox-wrapper",{attrs:{title:"Department"}},t._l(t.departments,function(e){return n("input-box",{key:e,attrs:{checkbox:e.id,title:e.name,custom:!1},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})}))],1)])])]),t._v(" "),n("div",{staticClass:"col-12 col-lg-9"},[n("input-search",{attrs:{"input-class":"form-control-lg"},on:{input:t.onInput},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-header bg-white d-flex flex-row"},[n("h5",{staticClass:"mb-0"},[t._v(t._s(t.searchText))]),t._v(" "),n("div",{staticClass:"text-muted ml-auto"},[t._v("\n              "+t._s(t.countText)+"\n            ")])]),t._v(" "),n("div",{staticClass:"card-block"},[n("infinite-loader",{staticClass:"row",on:{infinite:t.onInfinite}},t._l(t.students,function(t){return n("router-link",{key:t,staticClass:"col-12 col-lg-6 student-card mb-3",attrs:{tag:"div",role:"button",to:{name:"student.show",params:{uid:t.uid}}}},[n("student-card",{attrs:{student:t}})],1)}))],1)])],1)])])])},staticRenderFns:[]}},561:function(t,e,n){var i=n(0)(n(885),n(1201),null,null);t.exports=i.exports},635:function(t,e,n){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(161),r=_interopRequireDefault(i),a=n(3),s=_interopRequireDefault(a),u=n(2),c=_interopRequireDefault(u),l=n(66),o=_interopRequireDefault(l),d=n(7),p=n(532),f=_interopRequireDefault(p),m=n(531),h=_interopRequireDefault(m),_=n(537),v=_interopRequireDefault(_);e.default={data:function(){return{department:[],items:[],query:"",ignoreChanges:!1,page:1}},computed:{countText:function(){var t=this.items;return 1===t.length?"1 "+this.type:t.length+" "+this.type+"s"},searchText:function(){return"All "+this.type+"s"}},methods:{onInput:(0,o.default)(function(){this.page=1,this.fetch()},400),onInfinite:function(t){var e=this,n=t.loaded,i=t.complete;return(0,c.default)(s.default.mark(function _callee(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d.notLastPage,t.next=3,e.fetch();case 3:if(t.t1=t.sent,!(0,t.t0)(t.t1)){t.next=8;break}n(),t.next=9;break;case 8:i();case 9:case"end":return t.stop()}},_callee,e)}))()},fetch:function(){var t=this;return(0,c.default)(s.default.mark(function _callee2(){var e,n,i,a;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.callAPI();case 2:return e=s.sent,n=e.items,i=e.meta,n?1===t.page?t.items=n:(a=t.items).push.apply(a,(0,r.default)(n.filter(function(e){return t.items.findIndex(function(t){return t.id===e.id})<0}))):t.items=[],t.page=(0,d.nextPage)(i),s.abrupt("return",i);case 8:case"end":return s.stop()}},_callee2,t)}))()},go:function(){var t={};this.ignoreChanges||(this.query.trim().length&&(t.q=this.query),this.discipline&&this.discipline.length&&(t.discipline=this.discipline.slice()),this.department.length&&(t.department=this.department.slice()),this.$router.replace({name:this.type+".index",query:t}))},getRouteParams:function(){var t=this;this.ignoreChanges=!0,this.page=1,this.query=this.$route.query.q||"",this.discipline&&(this.discipline=(0,d.toArray)(this.$route.query.discipline||[]).map(d.toInt)),this.department=(0,d.toArray)(this.$route.query.department||[]).map(d.toInt),this.$nextTick(function(){t.ignoreChanges=!1}),this.fetch()}},created:function(){this.getRouteParams()},components:{StudentCard:f.default,TeacherCard:h.default,EmployeeCard:v.default},watch:{discipline:"go",department:"go",$route:"getRouteParams"}}},885:function(t,e,n){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=_interopRequireDefault(i),a=n(2),s=_interopRequireDefault(a),u=n(5),c=_interopRequireDefault(u),l=n(4),o=n(635),d=_interopRequireDefault(o);e.default={name:"StudentDirectory",data:function(){return{discipline:[]}},computed:(0,c.default)({type:function(){return"student"},students:function(){return this.items}},(0,l.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines"})),methods:(0,c.default)({callAPI:function(){var t=this;return(0,s.default)(r.default.mark(function _callee(){var e,n,i;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.index({page:t.page,q:t.query,department:t.department,discipline:t.discipline});case 2:return e=r.sent,n=e.students,i=e.meta,r.abrupt("return",{items:n,meta:i});case 6:case"end":return r.stop()}},_callee,t)}))()}},(0,l.mapActions)("students",["index"])),mixins:[d.default]}}});
//# sourceMappingURL=30.321dcef974f73263fbdb.js.map