webpackJsonp([27,39],{428:function(e,t,i){var n=i(0)(i(627),i(746),null,null);e.exports=n.exports},489:function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(118),r=_interopRequireDefault(n),a=i(3),s=_interopRequireDefault(a),u=i(2),c=_interopRequireDefault(u),o=i(115),l=_interopRequireDefault(o),d=i(8),p=i(402),f=_interopRequireDefault(p),m=i(400),h=_interopRequireDefault(m),v=i(407),_=_interopRequireDefault(v);t.default={data:function(){return{department:[],items:[],query:"",ignoreChanges:!1,page:1}},computed:{countText:function(){var e=this.items;return 1===e.length?"1 "+this.type:e.length+" "+this.type+"s"},searchText:function(){return"All "+this.type+"s"}},methods:{onInput:(0,l.default)(function(){this.page=1,this.fetch()},400),onInfinite:function(e){var t=this,i=e.loaded,n=e.complete;return(0,c.default)(s.default.mark(function _callee(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.notLastPage,e.next=3,t.fetch();case 3:if(e.t1=e.sent,!(0,e.t0)(e.t1)){e.next=8;break}i(),e.next=9;break;case 8:n();case 9:case"end":return e.stop()}},_callee,t)}))()},fetch:function(){var e=this;return(0,c.default)(s.default.mark(function _callee2(){var t,i,n,a;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.callAPI();case 2:return t=s.sent,i=t.items,n=t.meta,i?1===e.page?e.items=i:(a=e.items).push.apply(a,(0,r.default)(i.filter(function(t){return e.items.findIndex(function(e){return e.id===t.id})<0}))):e.items=[],e.page=(0,d.nextPage)(n),s.abrupt("return",n);case 8:case"end":return s.stop()}},_callee2,e)}))()},go:function(){var e={};this.ignoreChanges||(this.query.trim().length&&(e.q=this.query),this.discipline&&this.discipline.length&&(e.discipline=this.discipline.slice()),this.department.length&&(e.department=this.department.slice()),this.$router.replace({name:this.type+".index",query:e}))},getRouteParams:function(){var e=this;this.ignoreChanges=!0,this.page=1,this.query=this.$route.query.q||"",this.discipline&&(this.discipline=(0,d.toArray)(this.$route.query.discipline||[]).map(d.toInt)),this.department=(0,d.toArray)(this.$route.query.department||[]).map(d.toInt),this.$nextTick(function(){e.ignoreChanges=!1}),this.fetch()}},created:function(){this.getRouteParams()},components:{StudentCard:f.default,TeacherCard:h.default,EmployeeCard:_.default},watch:{discipline:"go",department:"go",$route:"getRouteParams"}}},627:function(e,t,i){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),r=_interopRequireDefault(n),a=i(2),s=_interopRequireDefault(a),u=i(5),c=_interopRequireDefault(u),o=i(4),l=i(489),d=_interopRequireDefault(l);t.default={name:"StudentDirectory",data:function(){return{discipline:[]}},computed:(0,c.default)({type:function(){return"student"},students:function(){return this.items}},(0,o.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines"})),methods:(0,c.default)({callAPI:function(){var e=this;return(0,s.default)(r.default.mark(function _callee(){var t,i,n;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.index({page:e.page,q:e.query,department:e.department,discipline:e.discipline});case 2:return t=r.sent,i=t.students,n=t.meta,r.abrupt("return",{items:i,meta:n});case 6:case"end":return r.stop()}},_callee,e)}))()}},(0,o.mapActions)("students",["index"])),mixins:[d.default]}},746:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("container",{attrs:{title:"Students Directory",subtitle:"Explore students' information",back:""},on:{back:function(t){e.$router.go(-1)}}},[i("div",{staticClass:"container py-3 student-list"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-3"},[i("div",{staticClass:"card card-block"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-6 col-md-12 mb-1"},[i("checkbox-wrapper",{attrs:{title:"Dicipline"}},e._l(e.disciplines,function(t){return i("input-box",{directives:[{name:"model",rawName:"v-model",value:e.discipline,expression:"discipline"}],attrs:{checkbox:t.id,title:t.name,custom:!1},domProps:{value:e.discipline},on:{input:function(t){e.discipline=t}}})}))],1),e._v(" "),i("div",{staticClass:"col-6 col-md-12"},[i("checkbox-wrapper",{attrs:{title:"Department"}},e._l(e.departments,function(t){return i("input-box",{directives:[{name:"model",rawName:"v-model",value:e.department,expression:"department"}],attrs:{checkbox:t.id,title:t.name,custom:!1},domProps:{value:e.department},on:{input:function(t){e.department=t}}})}))],1)])])]),e._v(" "),i("div",{staticClass:"col-12 col-lg-9"},[i("input-search",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{"input-class":"form-control-lg"},domProps:{value:e.query},on:{input:[function(t){e.query=t},e.onInput]}}),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"card-header bg-white d-flex flex-row"},[i("h5",{staticClass:"mb-0"},[e._v(e._s(e.searchText))]),e._v(" "),i("div",{staticClass:"text-muted ml-auto"},[e._v("\n              "+e._s(e.countText)+"\n            ")])]),e._v(" "),i("div",{staticClass:"card-block"},[i("infinite-loader",{staticClass:"row",on:{infinite:e.onInfinite}},e._l(e.students,function(e){return i("router-link",{key:e,staticClass:"col-12 col-lg-6 student-card mb-3",attrs:{tag:"div",role:"button",to:{name:"student.show",params:{uid:e.uid}}}},[i("student-card",{attrs:{student:e}})],1)}))],1)])],1)])])])},staticRenderFns:[]}}});
//# sourceMappingURL=27.0899e92c33da38a60cbb.js.map