webpackJsonp([20,31,39],{409:function(t,e,s){var r=s(0)(s(570),s(577),null,null);t.exports=r.exports},412:function(t,e,s){s(670);var r=s(0)(s(611),s(720),null,null);t.exports=r.exports},570:function(t,e,s){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),i=_interopRequireDefault(r),a=s(2),o=_interopRequireDefault(a),n=s(5),u=_interopRequireDefault(n),c=s(115),l=_interopRequireDefault(c),d=s(39),p=s(4),m=s(404),f=_interopRequireDefault(m),v=s(400),b=_interopRequireDefault(v);e.default={name:"CourseCreate",data:function(){return{attributes:{name:"",code:"",department_id:"",instructor:0,courses:[]},instructor:null,teachers:[]}},computed:(0,u.default)({prerequisites:function(){var t=this;return this.attributes.courses.map(function(e){return t.courseById(e)})},years:function(){return[{id:1,name:"First Year"},{id:2,name:"Second Year"},{id:3,name:"Third Year"},{id:4,name:"Fourth Year"}]},instructors:function(){var t=this.instructor,e=this.teachers;if(!t)return e;var s=e.findIndex(function(e){return e.id===t.id});return s>-1?e:[t].concat(e)}},(0,p.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines",courses:"courses/courses",semesters:"semesters/semesters",courseById:"courses/courseById"})),methods:(0,u.default)({processResponse:function(t,e,s){t?(this.attributes=this.$options.data().attributes,this.$router.replace({name:"course.show",params:{id:t.id}})):e?(this.setErrors(e),this.formStatus=e.$message):s&&(this.formStatus="Ah! Oh! This is unexpected. Call support now!")},create:function(){var t=this;return(0,o.default)(i.default.mark(function _callee(){var e,s,r,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.clearErrors(),t.$refs.submit.$el.classList.add("disabled"),i.next=4,t.store(t.attributes);case 4:e=i.sent,s=e.course,r=e.errors,a=e.response,t.$refs.submit.$el.classList.remove("disabled"),t.processResponse(s,r,a);case 10:case"end":return i.stop()}},_callee,t)}))()},onCourseSelect:function(t){this.attributes.courses.indexOf(t.id)<0&&this.attributes.courses.push(t.id)},onCourseRemove:function(t){var e=this.attributes.courses.indexOf(t.id);e>-1&&this.attributes.courses.splice(e,1)},onInstructorSearch:(0,l.default)(function(){var t=(0,o.default)(i.default.mark(function _callee2(t){var e,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.search({q:t});case 2:e=r.sent,s=e.teachers,this.teachers=s||[];case 5:case"end":return r.stop()}},_callee2,this)}));return function(e){return t.apply(this,arguments)}}()),onInstructorSelect:function(t){this.instructor=t}},(0,p.mapActions)("courses",["index","store"]),(0,p.mapActions)("teachers",{search:"index"})),created:function(){this.courses.length||this.index(),this.onInstructorSearch()},components:{CourseCard:f.default,TeacherCard:b.default},mixins:[d.formHelper]}},577:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("container-window",{attrs:{title:"Create Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(e){t.$router.go(-1)}}},[s("template",{slot:"buttons"},[s("input-button",{ref:"submit",attrs:{value:"Create"},nativeOn:{click:function(e){t.create(e)}}})],1),t._v(" "),s("div",{staticClass:"container-zero mt-3"},[t.formStatus?s("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e()],1),t._v(" "),s("div",{staticClass:"container-zero"},[s("form",{staticClass:"row",on:{submit:function(e){e.preventDefault(),t.create(e)}}},[s("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.name,expression:"attributes.name"}],attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},domProps:{value:t.attributes.name},on:{input:function(e){t.attributes.name=e}}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.code,expression:"attributes.code"}],attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},domProps:{value:t.attributes.code},on:{input:function(e){t.attributes.code=e}}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.department_id,expression:"attributes.department_id"}],attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},domProps:{value:t.attributes.department_id},on:{input:function(e){t.attributes.department_id=e}}},"input-typeahead",{errors:t.errors,suggestions:t.departments}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.instructor,expression:"attributes.instructor"}],attrs:{title:"Instructor",component:"SelectOptionUser"},domProps:{value:t.attributes.instructor},on:{select:t.onInstructorSelect,search:t.onInstructorSearch,input:function(e){t.attributes.instructor=e}}},"input-typeahead",{suggestions:t.instructors}))],1),t._v(" "),s("div",{staticClass:"col-12"},[s("input-textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.description,expression:"attributes.description"}],attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},domProps:{value:t.attributes.description},on:{input:function(e){t.attributes.description=e}}},"input-textarea",{errors:t.errors}))],1)])]),t._v(" "),s("h6",{staticClass:"split-header mt-3 py-3 text-muted text-uppercase"},[t._v("Prerequisite Courses")]),t._v(" "),s("div",{staticClass:"container-zero"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Prerequisite courses")]),t._v(" "),s("typeahead",t._b({on:{select:t.onCourseSelect}},"typeahead",{suggestions:t.courses,value:[]}))],1)]),t._v(" "),t._l(t.prerequisites,function(e){return s("div",{staticClass:"col-12 col-lg-6 mb-3"},[s("course-card",t._b({attrs:{remove:""},on:{remove:t.onCourseRemove}},"course-card",{course:e}))],1)}),t._v(" "),0===t.prerequisites.length?s("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"27px 0"}},[t._v("\n        No prerequisite courses.\n      ")]):t._e()],2)])],2)},staticRenderFns:[]}},611:function(t,e,s){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s(3),i=_interopRequireDefault(r),a=s(2),o=_interopRequireDefault(a),n=s(29),u=_interopRequireDefault(n),c=s(5),l=_interopRequireDefault(c),d=s(4),p=s(409),m=_interopRequireDefault(p),f=s(8),v=s(406),b=_interopRequireDefault(v);e.default={name:"CourseEdit",extends:m.default,computed:(0,d.mapGetters)(["school"]),methods:(0,l.default)({setAttributes:function(){var t=this,e=this.course;if(e){var s=(e.sessions||[]).find(function(e){return e.session_id===t.school.session_id});this.attributes=(0,f.only)(e,(0,u.default)(this.attributes)),this.attributes.courses=(e.prerequisites||[]).map(function(t){return t.id}),this.attributes.instructor=s?s.instructor_id:0,this.instructor=s?s.instructor:null}},save:function(){var t=this;return(0,o.default)(i.default.mark(function _callee(){var e,s,r,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.clearErrors(),t.$refs.submit.$el.classList.add("disabled"),i.next=4,t.update({id:t.id,payload:t.attributes});case 4:e=i.sent,s=e.course,r=e.errors,a=e.response,t.$refs.submit.$el.classList.remove("disabled"),t.processResponse(s,r,a);case 10:case"end":return i.stop()}},_callee,t)}))()}},(0,d.mapActions)("courses",["update"])),created:function(){this.course&&this.setAttributes()},mixins:[b.default],watch:{course:"setAttributes"}}},642:function(t,e,s){e=t.exports=s(398)(),e.push([t.i,"",""])},670:function(t,e,s){var r=s(642);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s(399)("66a6931e",r,!0)},720:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("container-window",{attrs:{title:"Edit Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(e){t.$router.go(-1)}}},[s("template",{slot:"buttons"},[s("input-button",{ref:"submit",attrs:{value:"Save"},nativeOn:{click:function(e){t.save(e)}}})],1),t._v(" "),s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-lg-8 offset-lg-2 my-2"},[t.formStatus?s("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:t._s(t.formStatus)}}):t._e(),t._v(" "),s("form",{staticClass:"row"},[s("input",{attrs:{type:"submit",hidden:""}}),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.name,expression:"attributes.name"}],attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},domProps:{value:t.attributes.name},on:{input:function(e){t.attributes.name=e}}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.code,expression:"attributes.code"}],attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},domProps:{value:t.attributes.code},on:{input:function(e){t.attributes.code=e}}},"input-text",{errors:t.errors}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.department_id,expression:"attributes.department_id"}],attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},domProps:{value:t.attributes.department_id},on:{input:function(e){t.attributes.department_id=e}}},"input-typeahead",{errors:t.errors,suggestions:t.departments}))],1),t._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.instructor,expression:"attributes.instructor"}],attrs:{title:"Instructor",component:"SelectOptionUser"},domProps:{value:t.attributes.instructor},on:{select:t.onInstructorSelect,search:t.onInstructorSearch,input:function(e){t.attributes.instructor=e}}},"input-typeahead",{suggestions:t.instructors}))],1),t._v(" "),s("div",{staticClass:"col-12"},[s("input-textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.attributes.description,expression:"attributes.description"}],attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},domProps:{value:t.attributes.description},on:{input:function(e){t.attributes.description=e}}},"input-textarea",{errors:t.errors}))],1),t._v(" "),s("h6",{staticClass:"col-12 my-3 text-center text-uppercase text-muted"},[t._v("Constraints & Requisites")]),t._v(" "),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Prerequisite courses")]),t._v(" "),s("typeahead",t._b({on:{select:t.onCourseSelect}},"typeahead",{suggestions:t.courses,value:[]}))],1)]),t._v(" "),t._l(t.prerequisites,function(e){return s("div",{staticClass:"col-12 col-lg-6 mb-3"},[s("course-card",t._b({attrs:{remove:""},on:{remove:t.onCourseRemove}},"course-card",{course:e}))],1)}),t._v(" "),0===t.prerequisites.length?s("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"64px 0"}},[t._v("\n            No prerequisite courses.\n          ")]):t._e()],2)],1)])])],2)},staticRenderFns:[]}}});
//# sourceMappingURL=20.8bb82cb3109b9c6c0c74.js.map