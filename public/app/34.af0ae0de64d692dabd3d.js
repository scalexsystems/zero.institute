webpackJsonp([34],{454:function(e,t,s){var r=s(0)(s(651),s(685),null,null);e.exports=r.exports},651:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s(3),i=_interopRequireDefault(r),a=s(2),n=_interopRequireDefault(a),o=s(5),u=_interopRequireDefault(o),c=s(50),l=_interopRequireDefault(c),d=s(39),p=s(4),f=s(449),m=_interopRequireDefault(f),h=s(446),b=_interopRequireDefault(h);t.default={name:"CourseCreate",data:function(){return{attributes:{name:"",code:"",department_id:"",instructor:0,courses:[]},instructor:null,teachers:[]}},computed:(0,u.default)({prerequisites:function(){var e=this;return this.attributes.courses.map(function(t){return e.courseById(t)})},years:function(){return[{id:1,name:"First Year"},{id:2,name:"Second Year"},{id:3,name:"Third Year"},{id:4,name:"Fourth Year"}]},instructors:function(){var e=this.instructor,t=this.teachers;return e?t.findIndex(function(t){return t.id===e.id})>-1?t:[e].concat(t):t}},(0,p.mapGetters)({departments:"departments/academic",disciplines:"disciplines/disciplines",courses:"courses/courses",semesters:"semesters/semesters",courseById:"courses/courseById"})),methods:(0,u.default)({processResponse:function(e,t,s){e?(this.attributes=this.$options.data().attributes,this.$router.replace({name:"course.show",params:{id:e.id}})):t?(this.setErrors(t),this.formStatus=t.$message):s&&(this.formStatus="Ah! Oh! This is unexpected. Call support now!")},create:function(){var e=this;return(0,n.default)(i.default.mark(function _callee(){var t,s,r,a;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.clearErrors(),e.$refs.submit.$el.classList.add("disabled"),i.next=4,e.store(e.attributes);case 4:t=i.sent,s=t.course,r=t.errors,a=t.response,e.$refs.submit.$el.classList.remove("disabled"),e.processResponse(s,r,a);case 10:case"end":return i.stop()}},_callee,e)}))()},onCourseSelect:function(e){this.attributes.courses.indexOf(e.id)<0&&this.attributes.courses.push(e.id)},onCourseRemove:function(e){var t=this.attributes.courses.indexOf(e.id);t>-1&&this.attributes.courses.splice(t,1)},onInstructorSearch:(0,l.default)(function(){var e=(0,n.default)(i.default.mark(function _callee2(e){var t,s;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.search({q:e});case 2:t=r.sent,s=t.teachers,this.teachers=s||[];case 5:case"end":return r.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()),onInstructorSelect:function(e){this.instructor=e}},(0,p.mapActions)("courses",["index","store"]),(0,p.mapActions)("teachers",{search:"index"})),created:function(){this.courses.length||this.index(),this.onInstructorSearch()},components:{CourseCard:m.default,TeacherCard:b.default},mixins:[d.formHelper]}},685:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("container-window",{attrs:{title:"Create Course",subtitle:"Add institute courses for students & teachers.",back:""},on:{back:function(t){e.$router.go(-1)}}},[s("template",{slot:"buttons"},[s("input-button",{ref:"submit",attrs:{value:"Create"},nativeOn:{click:function(t){e.create(t)}}})],1),e._v(" "),s("div",{staticClass:"container-zero mt-3"},[e.formStatus?s("alert",{directives:[{name:"autofocus",rawName:"v-autofocus"}],attrs:{type:"danger"},domProps:{innerHTML:e._s(e.formStatus)}}):e._e()],1),e._v(" "),s("div",{staticClass:"container-zero"},[s("form",{staticClass:"row",on:{submit:function(t){t.preventDefault(),e.create(t)}}},[s("input",{attrs:{type:"submit",hidden:""}}),e._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",e._b({attrs:{title:"Name",autofocus:"",required:"",subtitle:"Complete course name e.g. Introduction to Computing 1"},model:{value:e.attributes.name,callback:function(t){e.attributes.name=t},expression:"attributes.name"}},"input-text",{errors:e.errors}))],1),e._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-text",e._b({attrs:{title:"Code",required:"",subtitle:"A short name/code for the course e.g. CS50"},model:{value:e.attributes.code,callback:function(t){e.attributes.code=t},expression:"attributes.code"}},"input-text",{errors:e.errors}))],1),e._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",e._b({attrs:{title:"Department",required:"",subtitle:"Offerred by the department."},model:{value:e.attributes.department_id,callback:function(t){e.attributes.department_id=t},expression:"attributes.department_id"}},"input-typeahead",{errors:e.errors,suggestions:e.departments}))],1),e._v(" "),s("div",{staticClass:"col-12 col-lg-6"},[s("input-typeahead",e._b({attrs:{title:"Instructor",component:"SelectOptionUser"},on:{select:e.onInstructorSelect,search:e.onInstructorSearch},model:{value:e.attributes.instructor,callback:function(t){e.attributes.instructor=t},expression:"attributes.instructor"}},"input-typeahead",{suggestions:e.instructors}))],1),e._v(" "),s("div",{staticClass:"col-12"},[s("input-textarea",e._b({attrs:{title:"Brief description",subtitle:"A brief description of the course. This is not course syllabus (Instructors can add course syllabus later)."},model:{value:e.attributes.description,callback:function(t){e.attributes.description=t},expression:"attributes.description"}},"input-textarea",{errors:e.errors}))],1)])]),e._v(" "),s("h6",{staticClass:"split-header mt-3 py-3 text-muted text-uppercase"},[e._v("Prerequisite Courses")]),e._v(" "),s("div",{staticClass:"container-zero"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Prerequisite courses")]),e._v(" "),s("typeahead",e._b({on:{select:e.onCourseSelect}},"typeahead",{suggestions:e.courses,value:[]}))],1)]),e._v(" "),e._l(e.prerequisites,function(t){return s("div",{key:t,staticClass:"col-12 col-lg-6 mb-3"},[s("course-card",e._b({attrs:{remove:""},on:{remove:e.onCourseRemove}},"course-card",{course:t}))],1)}),e._v(" "),0===e.prerequisites.length?s("div",{staticClass:"col-12 text-center text-muted",staticStyle:{padding:"27px 0"}},[e._v("\n        No prerequisite courses.\n      ")]):e._e()],2)])],2)},staticRenderFns:[]}}});
//# sourceMappingURL=34.af0ae0de64d692dabd3d.js.map