webpackJsonp([23,32],{1094:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("container-window",{attrs:{title:"Edit Group",subtitle:"Update group details and add/remove members.",back:!0},on:{back:function(t){e.$router.go(-1)}}},[r("template",{slot:"buttons"},[r("input-button",{attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.onSubmit(t)}}},[e._v("Save")])],1),e._v(" "),r("form",{staticClass:"container my-3",on:{submit:function(t){t.preventDefault(),e.onSubmit(t)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-lg-8 offset-lg-2"},[r("input-text",{attrs:{title:"Name of the group",errors:e.errors,autofocus:"",required:""},model:{value:e.attributes.name,callback:function(t){e.attributes.name=t},expression:"attributes.name"}}),e._v(" "),r("checkbox-wrapper",{attrs:{title:"Group Type",required:""}},[r("input-box",{staticClass:"form-check-inline",attrs:{title:"Public",radio:!1},model:{value:e.attributes.private,callback:function(t){e.attributes.private=t},expression:"attributes.private"}}),e._v(" "),r("input-box",{staticClass:"form-check-inline",attrs:{title:"Private",radio:!0},model:{value:e.attributes.private,callback:function(t){e.attributes.private=t},expression:"attributes.private"}})],1),e._v(" "),r("input-textarea",{attrs:{title:"Description",errors:e.errors},model:{value:e.attributes.description,callback:function(t){e.attributes.description=t},expression:"attributes.description"}}),e._v(" "),r("div",{staticClass:"form-group"},[r("label",[e._v("Add/Remove Members")]),e._v(" "),r("typeahead",e._b({attrs:{title:"Members",component:"select-option-user"},on:{search:e.onSearch,select:e.addMember}},"typeahead",{suggestions:e.suggestions,value:[]}))],1)],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-8 offset-lg-2"},[r("infinite-loader",{ref:"is",staticClass:"row",on:{infinite:e.fetchMembers}},e._l(e.groupMembers,function(t){return r("div",{key:t,staticClass:"col-12 col-lg-6 mb-3"},[r("user-card",{attrs:{user:t,remove:""},on:{remove:function(r){e.removeMember(t)}}})],1)}))],1)])])],2)},staticRenderFns:[]}},455:function(e,t,r){var i=r(0)(r(652),r(686),null,null);e.exports=i.exports},466:function(e,t,r){var i=r(0)(r(790),r(1094),null,null);e.exports=i.exports},548:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(4);t.default={props:{id:{type:Number,required:!0}},computed:(0,s.default)({group:function(){return this.groupById(this.id)}},(0,a.mapGetters)("groups",["groupById"])),methods:(0,a.mapActions)("groups",{find:"find"}),created:function(){this.groupById(this.id)||this.find(this.id)},watch:{id:function(e){this.groupById(e)||this.find(e)}}}},652:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),s=_interopRequireDefault(i),a=r(2),u=_interopRequireDefault(a),n=r(5),o=_interopRequireDefault(n),c=r(4),l=r(39),p=r(50),d=_interopRequireDefault(p),f=r(7);t.default={name:"GroupCreate",data:function(){return{attributes:{name:"",private:!1,description:"",members:[]},members:[],suggestions:[]}},methods:(0,o.default)({onSubmit:function(){var e=this;return(0,u.default)(s.default.mark(function _callee(){var t,r,i;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$refs.submit&&e.$refs.submit.$el.classList.add("disabled"),s.next=3,e.create(e.attributes);case 3:t=s.sent,r=t.errors,i=t.group,e.$refs.submit&&e.$refs.submit.$el.classList.remove("disabled"),r&&e.setErrors(r),i&&(e.clearErrors(),e.attributes=e.$options.data().attributes,e.$router.push({name:"group.messages",params:{id:i.id}}));case 9:case"end":return s.stop()}},_callee,e)}))()},onMemberSelect:function(e){var t=e.user_id;this.attributes.members.indexOf(t)<0&&(this.attributes.members.push(t),this.members.push((0,f.clone)(e)))},onSearch:(0,d.default)(function(){var e=(0,u.default)(s.default.mark(function _callee2(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.query({q:r});case 2:e=i.sent,t=e.items,this.suggestions=t||[];case 5:case"end":return i.stop()}},_callee2,this)}));return function(){return e.apply(this,arguments)}}(),400)},(0,c.mapActions)("people",{query:"index"}),(0,c.mapActions)("groups",{create:"store"})),created:function(){this.onSearch()},mixins:[l.formHelper]}},653:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),s=_interopRequireDefault(i),a=r(2),u=_interopRequireDefault(a),n=r(119),o=_interopRequireDefault(n),c=r(5),l=_interopRequireDefault(c),p=r(4),d=r(7);t.default={data:function(){return{membersRequestSent:!1}},computed:(0,l.default)({groupMembers:function(){var e=this.membersByGroupId(this.id);return e?[].concat((0,o.default)(e)).sort(function(e,t){return e.name.localeCompare(t.name)}):[]}},(0,p.mapGetters)("groups",["membersByGroupId"])),methods:(0,l.default)({fetchMembers:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.loaded,i=void 0===r?function(){return 0}:r,a=t.complete,n=void 0===a?function(){return 0}:a;return(0,u.default)(s.default.mark(function _callee(){var t,r;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.membersRequestSent!==!0){s.next=3;break}return i(),s.abrupt("return",!0);case 3:if(e.group){s.next=6;break}return n(),s.abrupt("return",!1);case 6:return e.membersRequestSent=!0,s.next=9,e.fetchMembersAPI({group:e.group});case 9:if(t=s.sent,r=t.meta,e.membersRequestSent=!1,!(0,d.notLastPage)(r)){s.next=15;break}return i(),s.abrupt("return",!0);case 15:n();case 16:case"end":return s.stop()}},_callee,e)}))()}},(0,p.mapActions)("groups",{fetchMembersAPI:"members"})),created:function(){this.fetchMembers()},watch:{group:function(e,t){var r=this;t&&e.id!==t.id&&(this.membersRequestSent=!1,this.$refs&&this.$refs.is&&this.$refs.is.$emit("reset")),this.$nextTick(function(){return r.fetchMembers()})}}}},686:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("container-window",{attrs:{title:"Create Group",subtitle:"Create a group, add members & start your own community.",back:!0},on:{back:function(t){e.$router.push({name:"group.index"})}}},[r("template",{slot:"buttons"},[r("input-button",{ref:"submit",attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.onSubmit(t)}}},[e._v("Create")])],1),e._v(" "),r("form",{staticClass:"container my-3",on:{submit:function(t){t.preventDefault(),e.onSubmit(t)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-lg-8 offset-lg-2"},[r("input-text",{attrs:{title:"Name of the group",errors:e.errors,autofocus:"",required:""},model:{value:e.attributes.name,callback:function(t){e.attributes.name=t},expression:"attributes.name"}}),e._v(" "),r("checkbox-wrapper",{attrs:{title:"Group Type",required:""}},[r("input-box",{staticClass:"form-check-inline",attrs:{title:"Public",radio:!1},model:{value:e.attributes.private,callback:function(t){e.attributes.private=t},expression:"attributes.private"}}),e._v(" "),r("input-box",{staticClass:"form-check-inline",attrs:{title:"Private",radio:!0},model:{value:e.attributes.private,callback:function(t){e.attributes.private=t},expression:"attributes.private"}})],1),e._v(" "),r("input-textarea",{attrs:{title:"Description",errors:e.errors},model:{value:e.attributes.description,callback:function(t){e.attributes.description=t},expression:"attributes.description"}}),e._v(" "),r("div",{staticClass:"form-group"},[r("label",[e._v("Add Members")]),e._v(" "),r("typeahead",e._b({attrs:{title:"Members",component:"select-option-user"},on:{search:e.onSearch,select:e.onMemberSelect}},"typeahead",{suggestions:e.suggestions,value:[]}))],1)],1),e._v(" "),r("div",{staticClass:"col-12 col-lg-8 offset-lg-2"},[r("div",{staticClass:"row"},e._l(e.members,function(e){return r("div",{key:e,staticClass:"col-12 col-lg-6 mb-3"},[r("user-card",{attrs:{user:e}})],1)}))])])])],2)},staticRenderFns:[]}},790:function(e,t,r){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),s=_interopRequireDefault(i),a=r(2),u=_interopRequireDefault(a),n=r(5),o=_interopRequireDefault(n),c=r(4),l=r(7),p=r(548),d=_interopRequireDefault(p),f=r(653),m=_interopRequireDefault(f),b=r(455),v=_interopRequireDefault(b);t.default={name:"GroupEdit",extends:v.default,methods:(0,o.default)({onSubmit:function(){var e=this;return(0,u.default)(s.default.mark(function _callee(){var t,r,i;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.update({id:e.group.id,attrs:e.attributes});case 2:t=s.sent,r=t.errors,i=t.group,r&&e.setErrors(r),i&&(e.clearErrors(),e.attributes=e.$options.data().attributes,e.$router.go(-1));case 7:case"end":return s.stop()}},_callee,e)}))()},setAttributes:function(){this.group&&(this.attributes=(0,l.clone)({name:this.group.name,description:this.group.description,private:this.group.private,members:[]}))},addMember:function(e){this.add({id:this.group.id,member:e})},removeMember:function(e){this.remove({id:this.group.id,member:e})}},(0,c.mapActions)("groups",["update","add","remove"])),created:function(){this.setAttributes()},watch:{group:function(){this.setAttributes()}},mixins:[d.default,m.default]}}});
//# sourceMappingURL=23.18b5c7db66e012267054.js.map