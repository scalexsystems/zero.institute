webpackJsonp([3],{1166:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("container-window",e._b({on:{action:e.onAction}},"container-window",{title:e.title,subtitle:e.subtitle,photo:e.photo,scroll:!1}),[e.group.id?s("message-browser",e._b({ref:"mb",attrs:{unread:e.group.$unread_count},on:{send:e.onSend,read:e.onRead,infinite:e.fetchMessage},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},"message-browser",{messages:e.messages,dest:"groups/"+e.group.id+"/attachment"})):e.notFound?s("div",{staticClass:"container py-3"},[s("alert",{attrs:{type:"danger"}},[e._v("There is no such course session.")])],1):e._e()],1)},staticRenderFns:[]}},546:function(e,t,s){var o=s(0)(s(870),s(1166),null,null);e.exports=o.exports},586:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(7);t.default={props:{message:{type:Object,required:!0}},computed:{content:function(){var e=this.message;return(0,o.nl2br)((0,o.escapeHtml)((e.content||"").trim().replace(/(\r?\n){2,}/g,"\n\n")))}},methods:{isImage:function(e){return!this.isFailedAttachment(e)&&["png","gif","jpg","jpeg","webp","tiff","svg"].indexOf(e.extension)>-1},isFailedAttachment:function(e){return"$failed"in e}}}},587:function(e,t,s){s(656);var o=s(0)(s(638),s(694),null,null);e.exports=o.exports},588:function(e,t,s){s(658);var o=s(0)(s(614),s(700),null,null);e.exports=o.exports},604:function(e,t,s){var o,r,n;!function(s,i){r=[t,e],o=i,void 0!==(n="function"==typeof o?o.apply(t,r):o)&&(e.exports=n)}(0,function(e,t){"use strict";function assign(e){function changeOverflow(t){var s=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=s,e.style.overflowY=t}function getParentOverflows(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function resize(){var s=e.style.height,o=getParentOverflows(e),n=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var i=e.scrollHeight+t;if(0===e.scrollHeight)return void(e.style.height=s);e.style.height=i+"px",r=e.clientWidth,o.forEach(function(e){e.node.scrollTop=e.scrollTop}),n&&(document.documentElement.scrollTop=n)}function update(){resize();var t=Math.round(parseFloat(e.style.height)),s=window.getComputedStyle(e,null),r=Math.round(parseFloat(s.height));if(r!==t?"visible"!==s.overflowY&&(changeOverflow("visible"),resize(),r=Math.round(parseFloat(window.getComputedStyle(e,null).height))):"hidden"!==s.overflowY&&(changeOverflow("hidden"),resize(),r=Math.round(parseFloat(window.getComputedStyle(e,null).height))),n!==r){n=r;var i=o("autosize:resized");try{e.dispatchEvent(i)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var t=null,r=e.clientWidth,n=null,i=function(){e.clientWidth!==r&&update()},a=function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",update,!1),e.removeEventListener("keyup",update,!1),e.removeEventListener("autosize:destroy",a,!1),e.removeEventListener("autosize:update",update,!1),Object.keys(t).forEach(function(s){e.style[s]=t[s]}),s.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",update,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",update,!1),e.addEventListener("autosize:update",update,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",s.set(e,{destroy:a,update:update}),function(){var s=window.getComputedStyle(e,null);"vertical"===s.resize?e.style.resize="none":"both"===s.resize&&(e.style.resize="horizontal"),t="content-box"===s.boxSizing?-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),isNaN(t)&&(t=0),update()}()}}function destroy(e){var t=s.get(e);t&&t.destroy()}function update(e){var t=s.get(e);t&&t.update()}var s="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(s){return t[e.indexOf(s)]},set:function(s,o){e.indexOf(s)===-1&&(e.push(s),t.push(o))},delete:function(s){var o=e.indexOf(s);o>-1&&(e.splice(o,1),t.splice(o,1))}}}(),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(r=function(e){return e},r.destroy=function(e){return e},r.update=function(e){return e}):(r=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return assign(e)}),e},r.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],destroy),e},r.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],update),e}),t.exports=r})},606:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5),r=_interopRequireDefault(o),n=s(3),i=_interopRequireDefault(n),a=s(162),u=_interopRequireDefault(a),c=s(2),l=_interopRequireDefault(c),d=s(6),f=_interopRequireDefault(d);t.default={props:{dest:{type:String,required:!0},name:{type:String,default:"file"}},data:function(){return{uploading:!1,progress:0,partials:[],count:0,errors:[],results:[],handler:null,index:0,titles:[],message:""}},methods:{onFileSelected:function(e){var t=this;return(0,l.default)(i.default.mark(function _callee(){var s,o;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=e.target.files,s.length){r.next=3;break}return r.abrupt("return",!1);case 3:return t.uploading=!1,t.count=s.length,t.progress=0,t.partials=[],t.errors=[],t.results=[],t.errors[s.length-1]=void 0,t.$refs.info.$emit("open"),r.prev=11,r.next=14,t.getFileMeta(s);case 14:return o=r.sent,r.next=17,u.default.all(o.map(function(e){return t.upload(e)}));case 17:t.uploading=!1,t.$emit("uploaded",t.results,t.errors),r.next=24;break;case 21:r.prev=21,r.t0=r.catch(11),t.$debug(r.t0);case 24:case"end":return r.stop()}},_callee,t,[[11,21]])}))()},getFileMeta:function(e){for(var t=this,s=[],o=0;o<e.length;o+=1){var r=e[o],n=new window.FormData,i=r.name;n.append(this.name,r),s.push({index:o,payload:n,filename:i})}return this.titles=s.map(function(e){return e.filename}),new u.default(function(e,o){t.handler=function(r){r?(s[0].message=t.message,t.message="",t.titles.forEach(function(e,t){s[t].filename!==e&&s[t].payload.append("title",e)}),e(s)):o({message:"User cancelled upload."})}})},upload:function(e){var t=this,s=e.payload,o=e.index,n=e.filename,a=e.message;return(0,l.default)(i.default.mark(function _callee2(){var e,u,c;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.uploading=!0,i.prev=1,i.next=4,f.default.post(!0,t.dest,s,{progress:function(e){e.lengthComputable&&t.updateProgress(e.loaded/e.total*100,o)}});case 4:e=i.sent,u=e.attachment,t.results[o]=(0,r.default)({message:a,originalFilename:n},u),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(1),c=i.t0.errors,t.errors[o]={message:c.$message||"Failed to upload: "+n,payload:s,dest:t.dest,name:t.name};case 13:case"end":return i.stop()}},_callee2,t,[[1,9]])}))()},onCancel:function(){var e=this;this.$refs.info.$emit("close"),this.handler&&setTimeout(function(){return e.handler(!1)},0)},onUpload:function(){var e=this;this.handler&&(this.$refs.info.$emit("close"),setTimeout(function(){return e.handler(!0)},0))},updateProgress:function(e,t){this.partials[t]=e,this.progress=this.partials.reduce(function(e,t){return e+(t||0)},0)/this.count},getClassFor:function(e){var t=this.$refs.files.files[e];switch(this.getExtension(t)){case"webp":case"tiff":case"bmp":case"svg":case"jpeg":case"jpg":case"gif":case"png":return"fa-file-picture-o";case"7z":case"gz":case"tar":case"rar":case"zip":return"fa-file-zip-o";case"rtf":case"odt":case"pages":case"doc":case"docx":return"fa-file-word-o";case"ods":case"numbers":case"xls":case"csv":case"xlsx":return"fa-file-excel-o";case"odp":case"keynote":case"ppt":case"pptx":return"fa-file-powerpoint-o";case"eps":case"ps":case"pdf":return"fa-file-pdf-o";case"txt":return"fa-file-text-o";default:return"fa-file-o"}},getExtension:function(e){return e?e.name.split(".").pop().toLowerCase():null}},created:function(){var e=this;this.$on("upload",function(){var t=window.jQuery(e.$refs.files);t.replaceWith(t.val("").clone(!0)),t.click()})}}},607:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(5),r=_interopRequireDefault(o),n=s(678),i=_interopRequireDefault(n),a=s(677),u=_interopRequireDefault(a);t.default={name:"MessageBrowser",props:(0,r.default)({unread:{type:Number,required:!0}},u.default.props,i.default.props),components:{MessageComposer:u.default,MessageList:i.default},methods:{sendReadReceipts:function(){this.unread>0&&this.$emit("read",this.messages.filter(function(e){return e.unread}))},sendMessage:function(e){this.$emit("send",e),this.sendReadReceipts()}},created:function(){var e=this;this.$on("reset",function(t){return e.$refs&&e.$refs.ml.$emit("reset",t)}),this.sendReadReceipts()}}},608:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(604),r=_interopRequireDefault(o),n=s(675),i=_interopRequireDefault(n);t.default={name:"MessageComposer",data:function(){return{showPopup:!1}},props:{disabled:{type:Boolean,default:!1},value:{type:String,required:!0},dest:{type:String}},methods:{resize:function(){var e=this,t=window.document.createEvent("Event");t.initEvent("autosize:destroy",!1,!0),this.$refs.input.dispatchEvent(t),this.$nextTick(function(){(0,r.default)(e.$refs.input)})},focus:function(){var e=this;setTimeout(function(){return e.$refs.input.focus()},0)},onInput:function(e){this.$emit("input",e.target.value)},onEnter:function(e){e.shiftKey!==!0&&e.target.value.trim()&&(e.preventDefault(),this.$emit("send",this.value))},onUploaded:function(e,t){var s=e.length?e[0].message:"";this.$emit("send",{message:s,attachments:e.map(function(e){return e.id}),errors:t})}},mounted:function(){var e=this;this.$nextTick(function(){(0,r.default)(e.$refs.input)})},components:{FileUploader:i.default}}},609:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(7),r=s(630),n=_interopRequireDefault(r),i=s(679),a=_interopRequireDefault(i),u=s(106),c=_interopRequireDefault(u);t.default={name:"MessageList",props:{messages:{type:Array,required:!0}},data:function(){return{cursor:-1,fetching:!1,complete:!1,position:0,offset:0,scrollSelector:!0}},computed:{photos:function(){var e=this.cursor;return e<0?null:this.messages[e].attachments.filter(function(e){return(0,o.isImageExtension)(e.extension)}).map(function(e){var t=e.links;return{src:t.preview||t.original,alt:e.title}})}},methods:{preview:function(e,t,s){(0,o.isArray)(s)&&this.previewPhotos(e,t),this.previewAttachment(e,t,s)},previewAttachment:function(){},previewPhotos:function(e,t){this.cursor=t},next:function(){for(var e=this.cursor+1;e<this.messages.length;e+=1)if(this.messages[e].$hasPhotos)return void(this.cursor=e)},prev:function(){for(var e=this.cursor-1;e>=0;e-=1)if(this.messages[e].$hasPhotos)return void(this.cursor=e)},onInfinite:function(){var e=this;this.fetching=!0,this.saveScrollPosition(),this.$emit("infinite",{loaded:function(){e.fetching=!1,e.restoreScrollPosition()},complete:function(){e.fetching=!1,e.complete=!0,e.restoreScrollPosition()}})},saveScrollPosition:function(){this.position=this.messages.length?this.messages[0].id:0,0!==this.position&&this.$refs&&this.$refs.messages&&this.$refs.messages.length&&(this.offset=this.$refs.messages[0].$el.offsetTop)},restoreScrollPosition:function(){var e=this.position;if(this.$refs&&this.$refs.messages){this.position=0;var t=this.$refs.messages.find(function(t){return e===t.message.id});t&&(this.$refs.list.scrollTop=-(this.offset||0)+t.$el.offsetTop)}},checkInNextTick:function(){var e=this;this.$nextTick(function(){return e.$nextTick(function(){0===e.messages.length?(e.$debug("No messages, calling infinite."),e.onInfinite()):(e.$debug("Scroll to bottom."),e.$refs.list.scrollTop=e.$refs.list.scrollHeight)})})}},created:function(){var e=this;this.$on("reset",function(){e.fetching=!1,e.complete=!1}),this.checkInNextTick()},components:{Message:n.default,PhotoBrowser:a.default},mixins:[c.default],watch:{messages:function(e,t){var s=this;e.length&&t.length&&(0,o.last)(e).id!==(0,o.last)(t).id?(this.$debug("Probably message new message."),this.$nextTick(function(){s.$refs.list.scrollTop=s.$refs.list.scrollHeight})):(this.$debug("Don't care. Will check in next tick."),this.checkInNextTick())}}}},610:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"PhotoBrowser",props:{photos:{type:Array,required:!0}},data:function(){return{cursor:0,full:!1}},computed:{photo:function(){return this.photos[this.cursor]},count:function(){return this.photos.length}},methods:{next:function(){if(this.cursor+1===this.count)return void this.$emit("end");this.cursor+=1},prev:function(){if(0===this.cursor)return void this.$emit("start");this.cursor-=1}},mounted:function(){this.$el.focus()},watch:{photos:function(){this.cursor=0,this.full=!1,this.$el.focus()}}}},611:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(682),r=_interopRequireDefault(o),n=s(587),i=_interopRequireDefault(n),a=s(588),u=_interopRequireDefault(a),c=s(586),l=_interopRequireDefault(c);t.default={name:"MessageWithAttachment",computed:{photos:function(){var e=this;return this.message.attachments.filter(function(t){return e.isImage(t)})},failed:function(){var e=this;return this.message.attachments.filter(function(t){return e.isFailedAttachment(t)})},files:function(){var e=this;return this.message.attachments.filter(function(t){return!e.isImage(t)&&!e.isFailedAttachment(t)})},preview:function(){var e=this.photos[0];return e.links.preview||e.links.original},count:function(){return this.photos.length}},components:{MessageAttachment:r.default,MessageHeader:i.default,SenderPhoto:u.default},mixins:[l.default]}},612:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(587),r=_interopRequireDefault(o),n=s(588),i=_interopRequireDefault(n),a=s(586),u=_interopRequireDefault(a);t.default={name:"TextMessage",components:{MessageHeader:r.default,SenderPhoto:i.default},mixins:[u.default]}},613:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(587),r=_interopRequireDefault(o),n=s(588),i=_interopRequireDefault(n),a=s(586),u=_interopRequireDefault(a);t.default={name:"TextMessage",components:{MessageHeader:r.default,SenderPhoto:i.default},mixins:[u.default]}},614:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MessageSenderAvatar",props:{sender:{type:[Object],required:!0}},computed:{photo:function(){return this.sender.photo}},methods:{onSender:function(){this.$router.push({name:"user.show",params:{id:this.sender.id}})}}}},629:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{restoreMessage:function(e){e=e||this.$route,this.$debug("restore - "+e.path),this.message=sessionStorage.getItem("message-composer:"+e.path)||""},backupMessage:function(){this.$debug("backup - "+this.$route.path),this.value&&sessionStorage.setItem("message-composer:"+this.$route.path,this.message),this.message=""},clearMessage:function(){this.$debug("clear - "+this.$route.path),this.message="",sessionStorage.removeItem("message-composer:"+this.$route.path)}},beforeDestroy:function(){this.backupMessage()},created:function(){this.restoreMessage()},beforeRouteUpdate:function(e,t,s){this.backupMessage(),this.restoreMessage(e),s()},beforeRouteLeave:function(e,t,s){this.backupMessage(),s()}}},630:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function hasAttachment(e){return e.attachments&&e.attachments.length>0}function choose(e){var t=e.message,s=e.continued;return hasAttachment(t)?i.default:s?u.default:r.default}Object.defineProperty(t,"__esModule",{value:!0});var o=s(683),r=_interopRequireDefault(o),n=s(680),i=_interopRequireDefault(n),a=s(681),u=_interopRequireDefault(a);t.default={functional:!0,props:{message:{type:Object,required:!0},continued:{type:Boolean,default:!1}},render:function(e,t){return t.data.props=t.data.props||{},t.data.props.message=t.props.message,e(choose(t.props),t.data,t.children)}}},637:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getIcon(e){var t=d.findIndex(function(t){return t.indexOf(e)>-1});return t>-1?l[t]:"file-o"}Object.defineProperty(t,"__esModule",{value:!0});var o=s(639),r=_interopRequireDefault(o),n=s(29),i=_interopRequireDefault(n),a=s(669),u=_interopRequireDefault(a),c={"picture-o":["webp","tiff","bmp","svg","jpeg","jpg","gif","png"],"file-zip-o":["7z","gz","tar","rar","zip"],"file-word-o":["rtf","odt","pages","doc","docx"],"file-excel-o":["ods","numbers","xls","xlsx","csv","tsv"],"file-powerpoint-o":["odp","keynote","ppt","pptx"],"file-pdf-o":["eps","ps","pdf"],"file-text-o":["txt"]},l=(0,i.default)(c),d=(0,r.default)(c);t.default={name:"MessageAttachment",props:{attachment:{type:Object,required:!0}},computed:{icon:function(){return getIcon(this.attachment.extension)},title:function(){var e=this.attachment;return e.title||e.filename},size:function(){return(0,u.default)(this.attachment.size||0)}}}},638:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(30),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={name:"MessageMetaHeader",props:{message:{type:Object,required:!0},continued:{type:Boolean,default:!1}},computed:{sender:function(){return this.message.sender||{}},receivedAt:function(){var e=this.message;return(0,r.default)(e.received_at).format("LT")},sending:function(){var e=this.message;return"$status"in e&&e.$status.sending===!0},failed:function(){var e=this.message;return"$status"in e&&e.$status.failed===!0},failedMessage:function(){var e=this.message;return"$status"in e&&e.$status.message}},methods:{openSenderProfile:function(){this.$router.push({name:"user.show",params:{id:this.sender.id}})}}}},639:function(e,t,s){e.exports={default:s(640),__esModule:!0}},640:function(e,t,s){s(642),e.exports=s(9).Object.values},641:function(e,t,s){var o=s(32),r=s(19),n=s(53).f;e.exports=function(e){return function(t){for(var s,i=r(t),a=o(i),u=a.length,c=0,l=[];u>c;)n.call(i,s=a[c++])&&l.push(e?[s,i[s]]:i[s]);return l}}},642:function(e,t,s){var o=s(31),r=s(641)(!1);o(o.S,"Object",{values:function(e){return r(e)}})},643:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-list{position:relative;overflow-x:hidden;overflow-y:auto}.c-hub-message-list-container{min-height:100%}",""])},644:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-header{font-size:.71428rem;color:#b3b3b3}.c-hub-message-header.continued{height:0}.c-hub-message-header.continued span{background:#fff;margin-top:-.5rem}.c-hub-message-header.failed{color:#d0021b}.c-hub-message-header .sender{color:#b3b3b3}",""])},646:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-user-icon{width:2.57143rem;height:2.57143rem;margin:0 1.21429rem 0 .21429rem;cursor:pointer}.c-hub-message-user-icon.user{border-radius:.2rem}",""])},647:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-continued .sender-placeholder{width:2.57143rem;height:1px;margin:0 1.21429rem 0 .21429rem}",""])},648:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".file-upload-wrapper{position:relative}.btn-cancel{margin-right:.5rem}",""])},649:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-browser{height:100%;width:100%;position:absolute;overflow-x:hidden;overflow-y:auto}",""])},650:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-message-attachment{width:280px;padding:.85714rem;margin:10px 10px 0 0;overflow-x:hidden}.c-hub-message-message-attachment .download{margin-top:-.5rem;color:inherit}.c-hub-message-message-attachment .download:active,.c-hub-message-message-attachment .download:focus{outline:none;box-shadow:none}.c-hub-message-message-attachment .logo{font-size:2rem;margin-right:.5rem}.c-hub-message-message-attachment .filename{overflow-x:hidden;white-space:nowrap;text-overflow:ellipsis}.c-hub-message-message-attachment .main{overflow:hidden}.c-hub-message-message-attachment .fa-file-word-o,.c-hub-message-message-attachment .fa-picture-o{color:blue}.c-hub-message-message-attachment .fa-file-excel-o{color:green}.c-hub-message-message-attachment .fa-file-pdf-o,.c-hub-message-message-attachment .fa-file-powerpoint-o{color:red}.c-hub-message-message-attachment .fa-file-o,.c-hub-message-message-attachment .fa-file-text-o{color:gray}",""])},651:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".c-hub-message-composer{padding:0 1.8714rem;border-top:1px solid #e7e7e7;position:relative}.c-hub-message-composer-actions{position:absolute;right:1.8714rem;top:1rem}.c-hub-message-composer-input{border:none;resize:none;width:95%;min-height:21px;max-height:300px;line-height:1.5;overflow-x:hidden;padding:1.45rem 0}.c-hub-message-composer-input:active,.c-hub-message-composer-input:focus{outline:none}",""])},653:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,'.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photos---1e9Jo_0{overflow:hidden;position:relative;padding-bottom:56.25%}.PhotoBrowser---photo-browser---3oiih_0.fullscreen .PhotoBrowser---photos---1e9Jo_0{height:100vh;padding-bottom:0}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0{position:absolute;top:0;left:0;bottom:0;width:100%;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0.PhotoBrowser---before---1UB7S_0{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0.PhotoBrowser---after---14u2t_0{-webkit-transform:translateX(100%);transform:translateX(100%)}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0:after,.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0:before{-webkit-box-flex:1;-ms-flex:1 1 0.0001%;flex:1 1 0.0001%;height:1px;content:"";display:block}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---photo-container---1fiQ6_0 img{max-width:100%;max-height:100%;width:auto;height:auto}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---ticker---3AJ3W_0{position:absolute;bottom:20px;width:100%;text-align:center}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---ticker---3AJ3W_0 .PhotoBrowser---tick---1zOXf_0{display:inline-block;cursor:pointer;width:6px;height:6px;margin:6px;border-radius:3px;background:#fff;box-shadow:0 1px 3px 0 #000;-webkit-transition:all .3s;transition:all .3s;z-index:2}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---ticker---3AJ3W_0 .PhotoBrowser---tick---1zOXf_0.PhotoBrowser---active---dh0ZW_0{width:28px}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---action---2DroR_0{background:none;border:none;position:absolute;top:0;bottom:0;cursor:pointer;opacity:.3;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:2rem;font-size:2rem;-webkit-transition:all .3s;transition:all .3s;z-index:2}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---prev---1gIK9_0{left:0}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---prev---1gIK9_0:hover{background:-webkit-linear-gradient(left,rgba(0,0,0,.3),transparent);background:linear-gradient(90deg,rgba(0,0,0,.3),transparent);opacity:1}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---next----oV7i_0{right:0;left:auto}.PhotoBrowser---photo-browser---3oiih_0 .PhotoBrowser---next----oV7i_0:hover{background:-webkit-linear-gradient(right,rgba(0,0,0,.3),transparent);background:linear-gradient(-90deg,rgba(0,0,0,.3),transparent);opacity:1}',""]),t.locals={"photo-browser":"PhotoBrowser---photo-browser---3oiih_0",photoBrowser:"PhotoBrowser---photo-browser---3oiih_0",photos:"PhotoBrowser---photos---1e9Jo_0","photo-container":"PhotoBrowser---photo-container---1fiQ6_0",photoContainer:"PhotoBrowser---photo-container---1fiQ6_0",before:"PhotoBrowser---before---1UB7S_0",after:"PhotoBrowser---after---14u2t_0",ticker:"PhotoBrowser---ticker---3AJ3W_0",tick:"PhotoBrowser---tick---1zOXf_0",active:"PhotoBrowser---active---dh0ZW_0",action:"PhotoBrowser---action---2DroR_0",prev:"PhotoBrowser---prev---1gIK9_0",next:"PhotoBrowser---next----oV7i_0"}},654:function(e,t,s){t=e.exports=s(528)(void 0),t.push([e.i,".Attachment---photo-card---txogW_0{min-width:280px;max-width:480px}.Attachment---photo-card---txogW_0 img{-o-object-fit:cover;object-fit:cover}",""]),t.locals={"photo-card":"Attachment---photo-card---txogW_0",photoCard:"Attachment---photo-card---txogW_0"}},655:function(e,t,s){var o=s(643);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("3eb0a59a",o,!0)},656:function(e,t,s){var o=s(644);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("41e59698",o,!0)},658:function(e,t,s){var o=s(646);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("13c887be",o,!0)},659:function(e,t,s){var o=s(647);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("b64016fc",o,!0)},660:function(e,t,s){var o=s(648);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("8753e95e",o,!0)},661:function(e,t,s){var o=s(649);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("0782d221",o,!0)},662:function(e,t,s){var o=s(650);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("53f8f252",o,!0)},663:function(e,t,s){var o=s(651);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("ee03f91c",o,!0)},665:function(e,t,s){var o=s(653);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("6bd67226",o,!0)},666:function(e,t,s){var o=s(654);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s(529)("58d4f190",o,!0)},667:function(e,t){e.exports="/app/images/resources/assets/app/assets/attach-file.svg?1be38296da1f610fe17988160d9e9188"},668:function(e,t){e.exports="/app/images/resources/assets/app/assets/messages/chat-placeholder.svg?15387c961b1cbd3e20403c7a15069d78"},669:function(e,t,s){"use strict";(function(t){!function(t){function filesize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=0,a=void 0,u=void 0,c=void 0,l=void 0,d=void 0,f=void 0,p=void 0,h=void 0,m=void 0,g=void 0,v=void 0,b=void 0,_=void 0,w=void 0;if(isNaN(e))throw new Error("Invalid arguments");return c=t.bits===!0,v=t.unix===!0,u=t.base||2,g=void 0!==t.round?t.round:v?1:2,b=void 0!==t.spacer?t.spacer:v?"":" ",w=t.symbols||t.suffixes||{},_=2===u?t.standard||"jedec":"jedec",m=t.output||"string",d=t.fullform===!0,f=t.fullforms instanceof Array?t.fullforms:[],a=void 0!==t.exponent?t.exponent:-1,h=Number(e),p=h<0,l=u>2?1e3:1024,p&&(h=-h),(a===-1||isNaN(a))&&(a=Math.floor(Math.log(h)/Math.log(l)))<0&&(a=0),a>8&&(a=8),0===h?(n[0]=0,n[1]=v?"":o[_][c?"bits":"bytes"][a]):(i=h/(2===u?Math.pow(2,10*a):Math.pow(1e3,a)),c&&(i*=8)>=l&&a<8&&(i/=l,a++),n[0]=Number(i.toFixed(a>0?g:0)),n[1]=10===u&&1===a?c?"kb":"kB":o[_][c?"bits":"bytes"][a],v&&(n[1]="jedec"===_?n[1].charAt(0):a>0?n[1].replace(/B$/,""):n[1],s.test(n[1])&&(n[0]=Math.floor(n[0]),n[1]=""))),p&&(n[0]=-n[0]),n[1]=w[n[1]]||n[1],"array"===m?n:"exponent"===m?a:"object"===m?{value:n[0],suffix:n[1],symbol:n[1]}:(d&&(n[1]=f[a]?f[a]:r[_][a]+(c?"bit":"byte")+(1===n[0]?"":"s")),n.join(b))}var s=/^(b|B)$/,o={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};filesize.partial=function(e){return function(t){return filesize(t,e)}},e.exports=filesize}("undefined"!=typeof window&&window)}).call(t,s(1))},675:function(e,t,s){s(660);var o=s(0)(s(606),s(708),null,null);e.exports=o.exports},676:function(e,t,s){s(661);var o=s(0)(s(607),s(709),null,null);e.exports=o.exports},677:function(e,t,s){s(663);var o=s(0)(s(608),s(715),null,null);e.exports=o.exports},678:function(e,t,s){s(655);var o=s(0)(s(609),s(693),null,null);e.exports=o.exports},679:function(e,t,s){var o={};o.$style=s(665);var r=s(0)(s(610),s(696),null,o);e.exports=r.exports},680:function(e,t,s){var o={};o.$style=s(666);var r=s(0)(s(611),s(717),null,o);e.exports=r.exports},681:function(e,t,s){s(659);var o=s(0)(s(612),s(702),null,null);e.exports=o.exports},682:function(e,t,s){s(662);var o=s(0)(s(637),s(714),null,null);e.exports=o.exports},683:function(e,t,s){var o=s(0)(s(613),s(711),null,null);e.exports=o.exports},693:function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"list",staticClass:"c-hub-message-list"},[o("modal",{attrs:{open:null!==e.photos,wrapper:"d-flex flex-row"},on:{close:function(t){e.cursor=-1}}},[o("photo-browser",{staticClass:"flex-auto fullscreen",attrs:{photos:e.photos},on:{end:e.next,start:e.prev}})],1),e._v(" "),o("div",{staticClass:"c-hub-message-list-container container d-flex flex-column justify-content-end"},[e.complete?e._e():o("div",{staticClass:"col-12 text-center"},[e.fetching?o("icon",{staticClass:"fa-spin",attrs:{type:"circle-o-notch"}}):o("input-button",{staticClass:"btn btn-secondary btn-sm my-2 text-muted my-2",attrs:{value:"Load older messages"},nativeOn:{click:function(t){e.onInfinite(t)}}})],1),e._v(" "),e.fetching||0!==e.messages.length?e._e():o("div",{staticClass:"col-12"},[o("img",{attrs:{src:s(668)}})]),e._v(" "),e._l(e.messages,function(t,s){return o("message",e._b({key:t,ref:"messages",refInFor:!0,attrs:{"data-type":"message"},on:{preview:function(o){return e.preview(t,s,o)}}},"message",{message:t,continued:t.$continued===!0}))})],2)],1)},staticRenderFns:[]}},694:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-header",class:{failed:e.failed,continued:e.continued}},[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.continued,expression:"!continued"}],staticClass:"sender",attrs:{role:"button"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.openSenderProfile(t)}}},[e._v(e._s(e.sender.name))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.continued,expression:"!continued"}],staticClass:"px-1"},[e._v("Â·")]),e._v(" "),e.sending?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"sending",expression:"'sending'"}],class:{"float-right":e.continued}},[e._v("\n    Sending "),s("icon",{staticClass:"fa-spin",attrs:{type:"circle-o-notch"}})],1):e.failed?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.failedMessage,expression:"failedMessage"}],class:{"float-right":e.continued}},[e._v("Failed "),s("icon",{attrs:{type:"warning"}})],1):s("time",{directives:[{name:"show",rawName:"v-show",value:!e.continued,expression:"!continued"}],staticClass:"received"},[e._v(e._s(e.receivedAt))])])},staticRenderFns:[]}},696:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:[e.$style.photoBrowser],attrs:{tabindex:"1"},on:{keydown:[function(t){return"button"in t||!e._k(t.keyCode,"right",39)?"button"in t&&2!==t.button?null:(t.stopPropagation(),void e.next(t)):null},function(t){return"button"in t||!e._k(t.keyCode,"left",37)?"button"in t&&0!==t.button?null:(t.stopPropagation(),void e.prev(t)):null}]}},[s("div",{class:[e.$style.photos]},[s("a",{class:[e.$style.action,e.$style.prev],attrs:{role:"button"},on:{click:function(t){t.preventDefault(),e.prev(t)}}},[s("icon",{staticClass:"text-white",attrs:{type:"chevron-left"}})],1),e._v(" "),s("a",{class:[e.$style.action,e.$style.next],attrs:{role:"button"},on:{click:function(t){t.preventDefault(),e.next(t)}}},[s("icon",{staticClass:"text-white",attrs:{type:"chevron-right"}})],1),e._v(" "),e._l(e.photos,function(t,o){return s("div",{key:t,staticClass:"d-flex flex-column align-items-center",class:(r={},r[e.$style.photoContainer]=!0,r[e.$style.full]=e.full,r[e.$style.before]=o<e.cursor,r[e.$style.after]=o>e.cursor,r[e.$style.active]=o===e.cursor,r)},[s("img",{class:[e.$style.photo],attrs:{src:t.src,alt:t.alt}})]);var r}),e._v(" "),s("div",{class:[e.$style.ticker]},e._l(e.photos,function(t,o){return s("div",{key:t,class:(r={},r[e.$style.tick]=!0,r[e.$style.active]=o===e.cursor,r),on:{click:function(t){e.cursor=o}}});var r}))],2)])},staticRenderFns:[]}},700:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("img",{staticClass:"c-hub-message-user-icon user fit-cover",attrs:{src:e.photo},on:{click:e.onSender}})},staticRenderFns:[]}},702:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-continued d-flex flex-row"},[s("div",{staticClass:"sender-placeholder"}),e._v(" "),s("div",{staticClass:"text-message d-flex flex-column flex-auto"},[s("message-header",e._b({},"message-header",{message:e.message,continued:!0})),e._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}})],1)])},staticRenderFns:[]}},708:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"file-uploader-wrapper"},[s("input",{ref:"files",attrs:{type:"file",name:"files",multiple:"",hidden:""},on:{change:e.onFileSelected}}),e._v(" "),s("modal",{attrs:{open:e.uploading,dismissable:!1}},[s("div",{staticClass:"card mb-0"},[s("h5",{staticClass:"card-header"},[e._v("Uploading")]),e._v(" "),s("div",{staticClass:"card-block"},[s("progress",{staticClass:"progress bg-muted mb-0",staticStyle:{width:"100%"},attrs:{value:e.progress,max:"100"}},[s("div",{staticClass:"progress"},[s("span",{staticClass:"progress-bar",style:{width:e.progress+"%"}})])]),e._v(" "),s("div",{staticClass:"text-center pt-2"},[e._v(e._s(e.progress.toPrecision(3))+"%")])])])]),e._v(" "),s("modal",{ref:"info",attrs:{dismissable:!1}},[s("div",{staticClass:"card mb-0"},[s("h5",{staticClass:"card-header bg-white2"},[e._v("About the files")]),e._v(" "),s("div",{staticClass:"card-block",staticStyle:{overflow:"auto"}},[e._l(e.titles,function(t,o){return[0===o?s("div",{key:t,staticClass:"form-group"},[s("label",{attrs:{for:"file-uploader-1"}},[e._v("Name of the file")]),e._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-fw",class:[e.getClassFor(o)]})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.titles[o],expression:"titles[index]"}],staticClass:"form-control",attrs:{type:"text",id:"file-uploader-1"},domProps:{value:e.titles[o]},on:{input:function(t){if(!t.target.composing){var s=e.titles,r=o;Array.isArray(s)?s.splice(r,1,t.target.value):e.titles[o]=t.target.value}}}})])]):s("div",{key:t,staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"fa fa-fw",class:[e.getClassFor(o)]})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.titles[o],expression:"titles[index]"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.titles[o]},on:{input:function(t){if(!t.target.composing){var s=e.titles,r=o;Array.isArray(s)?s.splice(r,1,t.target.value):e.titles[o]=t.target.value}}}})])])]}),e._v(" "),s("input-textarea",{staticClass:"mt-2",attrs:{title:"Add a message (optional)"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],2),e._v(" "),s("div",{staticClass:"card-footer bg-white text-right"},[s("a",{staticClass:"btn btn-secondary btn-cancel",attrs:{role:"button",tabindex:""},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("a",{staticClass:"btn btn-primary",attrs:{role:"button",tabindex:""},on:{click:e.onUpload}},[e._v("Share")])])])])],1)},staticRenderFns:[]}},709:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-browser d-flex flex-column"},[s("message-list",e._b({ref:"ml",staticClass:"flex-auto p-2",on:{infinite:function(t){return e.$emit("infinite",t)}}},"message-list",{messages:e.messages})),e._v(" "),s("message-composer",e._b({on:{input:function(t){return e.$emit("input",t)},focus:e.sendReadReceipts,send:e.sendMessage}},"message-composer",{value:e.value,dest:e.dest}))],1)},staticRenderFns:[]}},711:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-text d-flex flex-row mt-3"},[s("sender-photo",{attrs:{sender:e.message.sender}}),e._v(" "),s("div",{staticClass:"text-message d-flex flex-column flex-auto"},[s("message-header",e._b({},"message-header",{message:e.message})),e._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}})],1)],1)},staticRenderFns:[]}},714:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-message-attachment card d-inline-flex flex-row",attrs:{role:"button"},on:{click:function(t){e.$emit("preview")}}},[s("div",{staticClass:"logo"},[s("icon",{staticClass:"fa-fw",attrs:{type:e.icon}})],1),e._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"filename"},[s("span",[e._v(e._s(e.title))])]),e._v(" "),s("div",{staticClass:"size"},[s("small",{staticClass:"text-muted"},[e._v(e._s(e.size))]),e._v(" "),s("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Download the file.",expression:"'Download the file.'"}],staticClass:"btn download float-right",attrs:{role:"button",href:e.attachment.links.original,target:"_blank",rel:"noopener noreferrer"}},[s("icon",{attrs:{type:"cloud-download"}})],1)])])])},staticRenderFns:[]}},715:function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"c-hub-message-composer"},[o("textarea",{ref:"input",staticClass:"c-hub-message-composer-input",attrs:{name:"message",placeholder:"Start discussing...",disabled:e.disabled,rows:"1",autocomplete:"off",autocorrect:"off"},domProps:{value:e.value},on:{input:e.onInput,keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.onEnter(t)},focus:function(t){e.$emit("focus")}}}),e._v(" "),o("div",{staticClass:"c-hub-message-composer-actions"},[o("a",{directives:[{name:"tooltip",rawName:"v-tooltip:left",value:"Add files",expression:"'Add files'",arg:"left"}],staticClass:"action",attrs:{role:"button"},on:{click:function(t){t.preventDefault(),e.$refs.uploader.$emit("upload")}}},[o("img",{attrs:{src:s(667),alt:"+"}})]),e._v(" "),o("file-uploader",e._b({ref:"uploader",on:{uploaded:e.onUploaded}},"file-uploader",{dest:e.dest}))],1)])},staticRenderFns:[]}},717:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"c-hub-message-attachment d-flex flex-row mt-3"},[s("sender-photo",{attrs:{sender:e.message.sender}}),e._v(" "),s("div",{staticClass:"text-message d-flex flex-column flex-auto"},[s("message-header",e._b({},"message-header",{message:e.message})),e._v(" "),e.content?s("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}}):e._e(),e._v(" "),e.count>0?s("div",{staticClass:"card card-inverse",class:[e.$style.photoCard],attrs:{role:"button"},on:{click:function(t){e.$emit("preview",e.photos)}}},[s("div",{staticClass:"embed-responsive embed-responsive-16by9 card-img"},[s("img",{staticClass:"embed-responsive-item photo",attrs:{src:e.preview}})]),e._v(" "),e.count>1?s("div",{staticClass:"card-img-overlay d-flex justify-content-center align-items-center",staticStyle:{background:"rgba(0, 0, 0, 0.1)"}},[s("h1",{staticClass:"text-white"},[e._v(e._s(e.count)+" Photos")])]):e._e()]):e._e(),e._v(" "),e.files.length?s("div",{staticClass:"attachments"},e._l(e.files,function(t){return s("message-attachment",{key:t,attrs:{attachment:t},on:{preview:function(s){e.$emit("preview",t)}}})})):e._e()],1)],1)},staticRenderFns:[]}},870:function(e,t,s){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=s(3),r=_interopRequireDefault(o),n=s(2),i=_interopRequireDefault(n),a=s(5),u=_interopRequireDefault(a),c=s(4),l=s(676),d=_interopRequireDefault(l),f=s(7),p=s(629),h=_interopRequireDefault(p);t.default={name:"CourseSessionMessages",props:{id:{type:Number,required:!0}},data:function(){return{notFound:!1,message:""}},computed:(0,u.default)({title:function(){return this.group.name||"..."},subtitle:function(){return"Click here to view course details."},photo:function(){return this.group.photo},session:function(){return this.sessionById(this.id)},group:function(){return this.session?this.groupById(this.session.group_id)||{}:{}},messages:function(){return this.group.id?this.messagesByGroupId(this.group.id):[]}},(0,c.mapGetters)("courses",["sessionById"]),(0,c.mapGetters)("groups",["messagesByGroupId"]),(0,c.mapGetters)({groupById:"groups/myGroupById"})),methods:(0,u.default)({onAction:function(){this.$router.push({name:"course.session.show",params:{course:this.session.course_id,session:this.id}})},onSend:function(e){var t="string"==typeof e?{content:e}:e,s=t.content,o=t.attachments,r=void 0===o?[]:o,n=t.errors,i=void 0===n?[]:n,a={id:this.group.id,content:s,extras:{attachments:r},errors:i};this.send(a),this.clearMessage()},onRead:function(e){this.readAll({id:this.group.id,messages:e})},fetchMessage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.loaded,o=void 0===s?function(){return 0}:s,n=t.complete,a=void 0===n?function(){return 0}:n;return(0,i.default)(r.default.mark(function _callee(){var t,s;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.fetchMessagesAPI({group:e.group});case 2:if(t=r.sent,s=t.meta,!(0,f.notLastPage)(s)){r.next=7;break}return o(),r.abrupt("return",!0);case 7:a();case 8:case"end":return r.stop()}},_callee,e)}))()},getGroup:function(e){var t=this;return(0,i.default)(r.default.mark(function _callee2(){var s;return r.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t.notFound=!1,t.groupById(e)){o.next=6;break}return o.next=4,t.find(e);case 4:s=o.sent,s||(t.notFound=!0);case 6:case"end":return o.stop()}},_callee2,t)}))()}},(0,c.mapActions)("groups",["send","readAll"]),(0,c.mapActions)("groups",{fetchMessagesAPI:"messages",find:"myFind"})),created:function(){this.session&&this.getGroup(this.session.group_id)},watch:{session:function(e){e&&this.getGroup(e.group_id)},group:function(){var e=this;this.$nextTick(function(){return e.$refs&&e.$refs.mb&&e.$refs.mb.$emit("reset")})}},components:{MessageBrowser:d.default},mixins:[h.default]}}});
//# sourceMappingURL=3.2dd702290c1b8a3a5597.js.map