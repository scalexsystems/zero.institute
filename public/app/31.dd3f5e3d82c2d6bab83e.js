webpackJsonp([31],{1179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("container",{attrs:{title:"Employees Directory",subtitle:"Explore employees' information",back:""},on:{back:function(t){e.$router.go(-1)}}},[n("div",{staticClass:"container py-3 employee-list"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-lg-3"},[n("div",{staticClass:"card card-block"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("checkbox-wrapper",{attrs:{title:"Department"}},e._l(e.departments,function(t){return n("input-box",{key:t,attrs:{checkbox:t.id,title:t.name,custom:!1},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})}))],1)])])]),e._v(" "),n("div",{staticClass:"col-12 col-lg-9"},[n("input-search",{attrs:{"input-class":"form-control-lg"},on:{input:e.onInput},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-header bg-white d-flex flex-row"},[n("h5",{staticClass:"mb-0"},[e._v(e._s(e.searchText))]),e._v(" "),n("div",{staticClass:"text-muted ml-auto"},[e._v("\n              "+e._s(e.countText)+"\n            ")])]),e._v(" "),n("div",{staticClass:"card-block"},[n("infinite-loader",{staticClass:"row",on:{infinite:e.onInfinite}},e._l(e.employees,function(e){return n("router-link",{key:e,staticClass:"col-12 col-lg-6 employee-card mb-3",attrs:{tag:"div",role:"button",to:{name:"employee.show",params:{uid:e.uid}}}},[n("employee-card",{attrs:{employee:e}})],1)}))],1)])],1)])])])},staticRenderFns:[]}},558:function(e,t,n){var r=n(0)(n(882),n(1179),null,null);e.exports=r.exports},635:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(161),i=_interopRequireDefault(r),a=n(3),s=_interopRequireDefault(a),u=n(2),o=_interopRequireDefault(u),l=n(66),c=_interopRequireDefault(l),p=n(7),d=n(532),f=_interopRequireDefault(d),m=n(531),h=_interopRequireDefault(m),y=n(537),_=_interopRequireDefault(y);t.default={data:function(){return{department:[],items:[],query:"",ignoreChanges:!1,page:1}},computed:{countText:function(){var e=this.items;return 1===e.length?"1 "+this.type:e.length+" "+this.type+"s"},searchText:function(){return"All "+this.type+"s"}},methods:{onInput:(0,c.default)(function(){this.page=1,this.fetch()},400),onInfinite:function(e){var t=this,n=e.loaded,r=e.complete;return(0,o.default)(s.default.mark(function _callee(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p.notLastPage,e.next=3,t.fetch();case 3:if(e.t1=e.sent,!(0,e.t0)(e.t1)){e.next=8;break}n(),e.next=9;break;case 8:r();case 9:case"end":return e.stop()}},_callee,t)}))()},fetch:function(){var e=this;return(0,o.default)(s.default.mark(function _callee2(){var t,n,r,a;return s.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.callAPI();case 2:return t=s.sent,n=t.items,r=t.meta,n?1===e.page?e.items=n:(a=e.items).push.apply(a,(0,i.default)(n.filter(function(t){return e.items.findIndex(function(e){return e.id===t.id})<0}))):e.items=[],e.page=(0,p.nextPage)(r),s.abrupt("return",r);case 8:case"end":return s.stop()}},_callee2,e)}))()},go:function(){var e={};this.ignoreChanges||(this.query.trim().length&&(e.q=this.query),this.discipline&&this.discipline.length&&(e.discipline=this.discipline.slice()),this.department.length&&(e.department=this.department.slice()),this.$router.replace({name:this.type+".index",query:e}))},getRouteParams:function(){var e=this;this.ignoreChanges=!0,this.page=1,this.query=this.$route.query.q||"",this.discipline&&(this.discipline=(0,p.toArray)(this.$route.query.discipline||[]).map(p.toInt)),this.department=(0,p.toArray)(this.$route.query.department||[]).map(p.toInt),this.$nextTick(function(){e.ignoreChanges=!1}),this.fetch()}},created:function(){this.getRouteParams()},components:{StudentCard:f.default,TeacherCard:h.default,EmployeeCard:_.default},watch:{discipline:"go",department:"go",$route:"getRouteParams"}}},882:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=_interopRequireDefault(r),a=n(2),s=_interopRequireDefault(a),u=n(5),o=_interopRequireDefault(u),l=n(4),c=n(635),p=_interopRequireDefault(c);t.default={name:"EmployeeDirectory",computed:(0,o.default)({type:function(){return"employee"},employees:function(){return this.items}},(0,l.mapGetters)({departments:"departments/departments"})),methods:(0,o.default)({callAPI:function(){var e=this;return(0,s.default)(i.default.mark(function _callee(){var t,n,r;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.index({page:e.page,q:e.query,department:e.department});case 2:return t=i.sent,n=t.employees,r=t.meta,i.abrupt("return",{items:n,meta:r});case 6:case"end":return i.stop()}},_callee,e)}))()}},(0,l.mapActions)("employees",["index"])),mixins:[p.default]}}});
//# sourceMappingURL=31.dd3f5e3d82c2d6bab83e.js.map